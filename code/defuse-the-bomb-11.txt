public class Solution {
    public int[] Decrypt(int[] code, int k) {
        if (code == null || code.Length == 0)
            return code;
        
        int[] res = new int[code.Length];
        
        if (k != 0)
        {
            int cur = 0,
                s = k > 0 ? 1 : res.Length - k * -1,
                e = k > 0 ? k : res.Length - 1;
                        
            for (int i = s; i <= e; i++)
                cur += code[i];
            
            for (int i = 0; i < res.Length; i++)
            {
                res[i] = cur;                
                cur = cur - code[s++ % code.Length] + code[++e % code.Length];
            }
        }
        
        return res;
    }
}