int hammingWeight(uint32_t n) {
    int map_4bits[] = {0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4};
    uint8_t* ptr8 = (uint8_t*)&n;
    uint8_t tmp;
    int i;
    int cnt = 0;
    
    for (i = 0; i < 4; i++) {
        tmp = *(ptr8+i);
        cnt = cnt + map_4bits[(tmp & 0xF0) >> 4];
        cnt = cnt + map_4bits[tmp & 0x0F];
    }
    
    return cnt;
}