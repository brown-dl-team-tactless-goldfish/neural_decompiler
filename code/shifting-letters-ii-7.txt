class Solution {
public:
    string shiftingLetters(string s, vector<vector<int>>& shifts) {
        int n = s.size();
        vector<int> a(n+1,0);
        for(auto& v:shifts){
            int st = v[0];
            int end = v[1];
            int d = v[2];
            if(d==0) d = -1;
            a[st]+=d;
            a[end+1]-=d;
        }

        for(int i=1;i<=n;i++){
            a[i]+=a[i-1];
        }

        string ans;
        for(int i=0;i<n;i++){
            int v = a[i];
            v = (v+26*n)%26;
            int c = int(s[i]-'a');
            v+=c;
            v%=26;
            char cc = char(v+'a');
            ans.push_back(cc);
        }

        return ans;

    }
};