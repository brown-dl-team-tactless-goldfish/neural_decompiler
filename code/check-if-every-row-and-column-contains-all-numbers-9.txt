public class Solution {
    public bool CheckValid(int[][] m) {
        for (int i = 0; i < m.Length; ++i) {
            HashSet<int> r = new HashSet<int>(), c = new HashSet<int>();
            for (int j = 0; j < m[i].Length; ++j) {
                r.Add(m[i][j]);
                c.Add(m[j][i]);
            }
            
            if (r.Count != m.Length || c.Count != m.Length) return false;
        }
        
        return true;
    }
}