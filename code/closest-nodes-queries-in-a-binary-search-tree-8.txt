
public class Solution {
    public IList<IList<int>> ClosestNodes(TreeNode root, IList<int> queries) {
        var res = new List<IList<int>>();

        foreach (var q in queries) {
            var cur = GetMinMax(root, int.MinValue, int.MaxValue, q);

            if (cur.min == int.MinValue) cur.min = -1;
            if (cur.max == int.MaxValue) cur.max = -1;

            res.Add(new List<int>() { cur.min, cur.max });
        }

        return res;
    }

    public (int min, int max) GetMinMax(TreeNode root, int curMin, int curMax, int v) {
        if (root is null) return (curMin, curMax);

        if (root.val > v) {
            curMax = Math.Min(curMax, root.val);
            return GetMinMax(root.left, curMin, curMax, v);
        } else if (root.val < v) {
            curMin = Math.Max(curMin, root.val);

            return GetMinMax(root.right, curMin, curMax, v);
        } else {
            return (root.val, root.val);
        }
    }
}