class Solution {
public:
    int minOperations(vector<vector<int>>& grid, int x) {
     
        int r = grid.size();
        int c = grid[0].size();
        
        int n = r*c;
        
        vector<int> v(n);

        for (int i = 0 ; i< r ; i++ )
            for (int j = 0 ; j < c ; j++ )
                v[c*i  + j ] = grid[i][j];
      
        sort(v.begin() , v.end() );
        
        int mid  = n/2 ;
        int steps =0 ;
        
        for (int i = 0 ; i<n ;i++ ){
            if (i == mid ) continue;
            
            if (abs( v[i] - v[mid]) % x == 0 ) steps += (abs( v[i] - v[mid]) / x);
            else return -1;            
        }
        
        return steps;

    }
};