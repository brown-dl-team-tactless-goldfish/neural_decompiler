

/**
 * Note: The returned array must be malloced, assume caller calls free().
 */
char ** findOcurrences(char * text, char * first, char * second, int* returnSize){
    char **result = calloc(1, sizeof(char *) * 500);
    int idx = 0;
    char *text1 = calloc(1, sizeof(char) * (strlen(text) + 2));
    sprintf(text1, " %s", text);
    
    char toSearch[24];    
    snprintf(toSearch, sizeof toSearch, " %s %s ", first, second);
    int search_len = strlen(toSearch);
    char *p = NULL, *inSearch = text1;
    
    while((p = strstr(inSearch, toSearch)) != NULL) {
        p += search_len;
        
        while(*p == ' ') {
            p++;
        }

        // end of text
        if(*p == '\0') {
            *returnSize = idx;
            return result;
        }
        
        inSearch = p-1;
        char *start = p;
        int chars_count = 0;
        while(*p != ' ' && *p != '\0') {
            chars_count++;
            p++;
        }
        char *str = malloc(sizeof(char) * (chars_count+1));
        strncpy(str, start, chars_count);
        str[chars_count] = '\0';
        result[idx++] = str;
    }
    *returnSize = idx;
    return result;
}
