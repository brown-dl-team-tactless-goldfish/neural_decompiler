class Solution {
public:
    string findTheString(vector<vector<int>>& lcp) {
        int n = lcp.size();
        if (lcp[0][0] < n) return "";
        for (int i = 0; i < n; i++) {
            for (int j = 0; j < n; j++) {
                if (lcp[i][j] != lcp[j][i]) return "";
                if (max(j, i) + lcp[i][j] > n)
                    return "";
                if (i && j && lcp[i - 1][j - 1] && lcp[i][j] != lcp[i - 1][j - 1] - 1)
                    return "";
            }
        }
        string res(n, ' ');
        char nxt = 'a';
        for (int i = 0; i < n; i++) {
            if (res[i] != ' ') continue;
            if (nxt > 'z') return "";
            for (int j = 0; j < n; j++)
                if (lcp[i][j]) res[j] = nxt;
            nxt++;
        }
        return res;
    }
};