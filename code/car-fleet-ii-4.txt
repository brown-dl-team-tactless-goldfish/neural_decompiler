class Solution {
public:
    vector<double> getCollisionTimes(vector<vector<int>>& cars) {
        vector<int> collision_idx(cars.size());
        vector<double> times(cars.size(), -1);
        for (int i = cars.size() - 1; i >= 0; i--) {
            int &colisn_idx = collision_idx[i];
            colisn_idx = i + 1;
            for (;colisn_idx != cars.size();) {
                if (cars[i][1] > cars[colisn_idx][1]) {
                    times[i] = 1. * (cars[colisn_idx][0] - cars[i][0]) / 
                                    (cars[i][1] - cars[colisn_idx][1]);
                    if (times[colisn_idx] < 0 || times[i] <= times[colisn_idx])
                        break;
                }
                colisn_idx = collision_idx[colisn_idx];
            }
        }
        return times;
    }
};