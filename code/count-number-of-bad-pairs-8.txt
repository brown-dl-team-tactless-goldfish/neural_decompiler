public:
    long long countBadPairs(vector<int>& nums) {
        unordered_map<long long, long long> count;
        for (int i = 0; i < nums.size(); ++ i){
            count[nums[i] - i] ++;
        }
        
        long long ans = 0;
        for (auto& it: count){
            if (it.second >= 2){
                ans += (it.second - 1) * (it.second) / 2;
            }
        }
        
        long long temp = (nums.size() - 1) * (nums.size()) / 2;
        return temp - ans;
    }