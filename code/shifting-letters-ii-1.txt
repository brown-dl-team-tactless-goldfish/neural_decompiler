class Solution {
public:
    string shiftingLetters(string s, vector<vector<int>>& shifts) {
        vector<int> dp(s.size()+1, 0);

        for(auto& ele: shifts) {
            if(ele[2] == 1) {
                dp[ele[0]] += 1;
                dp[ele[1]+1]-=1;
            }else {
                dp[ele[0]] -= 1;
                dp[ele[1]+1] += 1;
            }
        }


        for(int i=0;i<s.size();i++) {
            char c = s[i];
            if(i>0) {
                dp[i] += dp[i-1];
            }

            int move = dp[i]%26;
            if(move < 0) {
                move += 26;
            }

            if(c + move > 'z') {
                c = char(c + move - 26);
            }else {
                c = char(c + move);
            }

            s[i] = c;
        }

        return s;
    }
};