int countSubarrays(int* nums, int numsSize, int k){
    int at;
    int appear[200000] = {0};
    int count = 0;
    int ans = 1;
    for (int i = 0 ; i < numsSize ; i++){
        if (nums[i] == k) {
            appear[100000] = 1;
            at = i;
            i++;
            while (i < numsSize){
                if (nums[i] > k){
                    count++;
                } else {
                    count--;
                }
                if (count == 1 || count == 0){
                    ans++;
                }
                appear[count+100000]++;
                i++;
            }
        }
    }
    count = 0;
    for (int i = at-1 ; i >= 0 ; i--){
        if (nums[i] > k){
            count++;
        } else if (nums[i] < k){
            count--;
        }
        ans += appear[0-count+100000];
        ans += appear[1-count+100000];
    }
    return ans;
}