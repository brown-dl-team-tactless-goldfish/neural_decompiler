class Solution {
public:
    bool find(string s)
    {
        int n=s.size();
        for(int i=0;i<n;i++)
        {
            if(s[i]>='0'&&s[i]<='9')
            {
                return false;
            }
        }
        int p=0;
        int index1=0;
        int index2=0;
        int count=0;
        auto f=[&](int i)
        {
            if(s[i]>='a'&&s[i]<='z')
            {
                return true;
            }
            return false;
        };
        if(s[0]=='-'||s[n-1]=='-')
        {
            return false;
        }
        for(int i=1;i<n-1;i++)
        {
            if(s[i]!='-')
            {
                continue;
            }
            if(s[i]=='-'&&f(i-1)&&f(i+1))
            {
                count++;
            }
            else
            {
                return false;
            }
            if(count>1)
            {
                return false;
            }
        }
        for(int i=0;i<n;i++)
        {
            if((s[i]=='.'||s[i]==','||s[i]=='!')&&i!=n-1)
            {
               return false;
            }
        }
        
        return  true;
    }
    int countValidWords(string s) 
    {
        istringstream ss(s);
        string ans;
        int count=0;
        while(ss>>ans)
        {
            if(find(ans))
            {
                count++;
            }
        }
        return count;
    }
};