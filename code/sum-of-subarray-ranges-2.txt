class Solution {
    public long subArrayRanges(int[] nums) {
        long ans = 0;
        for (int i = 0; i < nums.length; i ++) {
            int mn = nums[i], mx = nums[i];
            for (int j = i + 1; j < nums.length; j ++) {
                mn = (nums[j] < mn) ? nums[j] : mn;
                mx = (nums[j] > mx) ? nums[j] : mx;
                ans += mx - mn;
            }
        }
        return ans;
    }
};