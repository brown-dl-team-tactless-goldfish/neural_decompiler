// OJ: https://leetcode.com/problems/number-of-pairs-of-strings-with-concatenation-equal-to-target/
// Author: github.com/lzl124631x
// Time: O(NW) where `N` is the length of `A` and `W` is the maximum length of elements in `A`
// Space: O(U) where `U` is the number of unique strings in `A`.
class Solution {
public:
    int numOfPairs(vector<string>& A, string s) {
        unordered_map<string, int> m;
        for (auto &t : A) m[t]++;
        int ans = 0;
        for (auto &[prefix, cnt] : m) {
            if (prefix.size() > s.size()) continue;
            if (s.substr(0, prefix.size()) == prefix) {
                auto suffix = s.substr(prefix.size());
                ans += m[prefix] * m[suffix];
                if (prefix == suffix) ans -= m[prefix];
            }
        }
        return ans;
    }
};