int lookup(const char *s, int len, char **wordDict, int wordDictSize)
{
    int wordcnt;
    char *tmp = strdup(s);
    tmp[len] = 0;

    for(wordcnt = 0; wordcnt < wordDictSize; wordcnt++)
    {   
        char * p = wordDict[wordcnt];

        if (!(strcmp(tmp, p)))
        {   
            free(tmp);
            return 1;
        }
    }
    
    free(tmp);
    return 0;
}

int wordBreak(char * s, char ** wordDict, int wordDictSize){

    //printf("workdBreak call for %s\n", s);

    if(*s && (*(s+1) == '\0'))
    {   
        if (lookup(s, 1, wordDict, wordDictSize))
        {   
            return 1;
        }
        else
        {   
            return 0;
        }

    }


    for (char *t = s; *t; t++)
    {
        if (lookup(s, t - s + 1, wordDict, wordDictSize))
        {
            if (*(t + 1) == '\0') // the last word lookup is good
            {
                return 1;
            }
            if (wordBreak(t + 1, wordDict, wordDictSize))
            {
                return 1;
            }

        }

    }
    return 0;
}