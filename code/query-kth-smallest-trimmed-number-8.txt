class Solution {
public:
    vector<int> smallestTrimmedNumbers(vector<string>& nums, vector<vector<int>>& queries) {
        vector<int> res;
        int m = nums.size(), n = nums[0].size();
        vector<vector<int>> dp(m, vector<int>(n+1, 0));
        for(int j=n-1; j>=0; --j) {
            vector<vector<int>> vs;
            for(int i=0; i<m; ++i) {
                vs.push_back({nums[i][j]-'0', dp[i][n-j-1], i});
            }
            sort(vs.begin(), vs.end());
            for(int i=0; i<m; ++i) {
                dp[vs[i][2]][n-j] = i;
            }
        }
        for(auto &a : queries) {
            int k = a[0], tr = a[1];
            for(int i=0; i<m; ++i) {
                if(dp[i][tr] == k - 1) {
                    res.push_back(i);
                    break;
                }
            }
        }
        return res;
    }
};