class Solution {
public:
    int countHillValley(vector<int>& nums) {
    if (nums.size()<3) return 0;
    int count =0; int a = nums[0]; int b = nums[2];
    for(int i=1; i<nums.size()-1;i++)
    {
        if(nums[i-1]<nums[i] && nums[i]> nums[i+1] || nums[i-1]>nums[i] && nums[i]<nums[i+1]) count++;
        else
        {
            int j = i;int k =i;
            while(nums[i] == nums[j] && j>0) j--;
            while (nums[i] == nums[k] && k<nums.size()-1 ) k++;
            if(nums[j]<nums[i] && nums[i]> nums[k] || nums[j]>nums[i] && nums[i]<nums[k]) count++;
            if(k>i) i = k-1;
        }
    }
    return count;
    }
};