int maxProfit(int *prices, int pricesSize){
    int p0, p1, p2, p3, t0, t1, t2, t3, i;
    p0 = -prices[0];
    p1 = p0 + 1;
    p2 = p1 - 100000;
    p3 = p2 + 1;
    
    for (i = 1; i < pricesSize; i++){
        t0 = (   - prices[i] < p0) ? p0 :    - prices[i];
        t1 = (p0 + prices[i] < p1) ? p1 : p0 + prices[i];
        t2 = (p1 - prices[i] < p2) ? p2 : p1 - prices[i];
        t3 = (p2 + prices[i] < p3) ? p3 : p2 + prices[i];
        p0 = t0;
        p1 = t1;
        p2 = t2;
        p3 = t3;}
    
    p1 = (0 < p1) ? p1 : 0;
    return (p1 < p3) ? p3 : p1;}