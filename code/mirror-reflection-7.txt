tx = 0;
ty = 0;
tlen = p;
tdir = 1;
ts = q;

do {
    absorbed = reflect(&tx, &ty, &tlen, &tdir, &ts);
} while(absorbed != 1);

if(ty == 0) return 0;
else if(tx == 0) return 2;
else return 1;

return 0;