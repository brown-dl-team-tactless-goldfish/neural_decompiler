class TweetCounts {
public:
    
    // store tweet times in Set for each tweetName
    unordered_map<string,set<pair<int,int>>>data;
    int iter;
    
    TweetCounts() {
        iter = 0;    // handle duplicate value with pair in Set
    }
    
    // add time in to the Set of tweetName from HashTable
    void recordTweet(string tweetName, int time) {
        data[tweetName].insert({time,iter++});
    }
    
    vector<int> getTweetCountsPerFrequency(string freq, string tweetName, int startTime, int endTime) {
        
        // time chunk size for minute, hour and second
        int chunk = freq[0]=='m' ? 60 : (freq[0]=='h' ? 3600 : 24*3600);
        
        // find the first position of startTime and Set end
        set<pair<int,int>>::iterator start = data[tweetName].lower_bound({startTime,0});
        set<pair<int,int>>::iterator end = data[tweetName].end();
        
        // set all possible result values with 0  => number of chunk = range / chunk size  
        vector<int>res;
        for(int i=0;i<=(endTime - startTime)/chunk;i++)res.push_back(0);
        
        // loop through start to end or time<=endTime and count the frequency
        while(start!=end && (*start).first<=endTime)
        {
            res[((*start).first - startTime)/chunk]++;
            start++;
        }
        
        return res;
    }
};