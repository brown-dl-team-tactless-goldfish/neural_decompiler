int binarySearch(int left, int right, int* dp, int goal){
    while(1){
        int mid=left+(right-left)/2;
        if(right<left) return left;
        if(goal==dp[mid]) return mid;
        
        if(goal>dp[mid]){
            left=mid+1;
        }else{
            right=mid-1;
        }
    }
    return -1;
}

int lengthOfLIS(int* nums, int numsSize){
    int dp[numsSize];
    int current=0;
    for(int i=0; i<numsSize; i++){
        if(i==0||dp[current-1]<nums[i]){
            dp[current++]=nums[i];
        }else{
            int p = binarySearch(0, current-1, dp, nums[i]);
            dp[p]=nums[i];
        }
    }
    return current;
}