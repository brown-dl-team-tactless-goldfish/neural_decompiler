public int MaxRotateFunction(int[] A) {
    
    int sum = 0;
    for (int i = 0; i < A.Length; i++) sum += A[i];
    
    int prev = 0;
    for (int i = 0; i < A.Length; i++) prev += i * A[i];
    
    int max = prev;
    for (int i = 1; i < A.Length; i++)
    {
        int curr = prev - sum + A[i-1]*A.Length;
        max = curr > max ? curr : max;
        prev = curr;
    }
    
    return max;
}