class Solution {
public:
    int countPalindromes(string s) {
        auto vl = countLeft(s);
        reverse(begin(s), end(s));
        auto vr = countLeft(s);
        reverse(begin(vr), end(vr));
        long long res = 0;
        for(int i=0;i<s.size()-1;i++){
            for(int j = 0;j<100;j++)
                res += vl[i][j] * vr[i+1][j];
        }
        return res % 1000000007;
    }

    vector<vector<long long>> countLeft(const string& s){
        const int n = s.size();
        vector<int> cnt(10, 0);
        auto res = vector(n+1, vector(100, 0LL));
        for(int i=0;i<n;i++){
            res[i+1] = res[i];
            int x = s[i] - '0';
            for(int y = 0; y<10; y++){
                int val = y*10 + x;
                res[i+1][val] += cnt[y];
            }
            cnt[x]++;
        }
        return res;
    }
};