public int maxSumRangeQuery(int[] nums, int[][] requests) {
    int cnt[] = new int[nums.length];
    for (var r : requests) {
        cnt[r[0]] += 1;
        if (r[1] + 1 < nums.length)
            cnt[r[1] + 1] -= 1;
    }
    for (int i = 1; i < cnt.length; ++i)
        cnt[i] += cnt[i - 1];
    Arrays.sort(nums);
    Arrays.sort(cnt);
    long res = 0;
    for (int i = 0; i < nums.length; ++i)
        res = (res + (long)nums[i] * cnt[i]) % 1000000007;
    return (int)res;
}