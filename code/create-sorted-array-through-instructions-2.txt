class Solution {
int bt[100001] = {};
void bit_add(size_t idx) {
    while (idx < 100001) {
        ++bt[idx];
        idx += idx & -(long long)idx; // adding leftmost bit.
    }
}
int bit_sum(size_t idx) {
    int res = 0;
    while (idx > 0) {
        res += bt[idx];
        idx &= idx - 1; // clearing leftmost bit.
    }
    return res;
}    
public:
int createSortedArray(vector<int>& is) {
    int res = 0;
    for (auto i = 0; i < is.size(); ++i) {
        res = (res + min(bit_sum(is[i] - 1), i - bit_sum(is[i]))) % 1000000007;
        bit_add(is[i]);
    }
    return res;
}