 * Definition for singly-linked list.
 * struct ListNode {
 *     int val;
 *     struct ListNode *next;
 * };
 */
struct ListNode* removeNthFromEnd(struct ListNode* head, int n) {
    struct ListNode *tmp = head, *tmp2 = head;
    int count = 0, fromFront;
    
    while (tmp) {
        count++;
        tmp = tmp->next;
    }
    free(tmp);
    if (count == 1) 
        return NULL;
    
    fromFront = count-n;
    for (int i=0; i<fromFront-1; i++) 
        tmp2=tmp2->next;
    if (fromFront ==0)
        head = head->next;

    tmp2->next = tmp2->next->next;
    return head;
}