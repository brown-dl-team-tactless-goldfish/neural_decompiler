 vector<int> replaceNonCoprimes(vector<int> &nums) {
    int n = nums.size();
    vector<int> ret;
    ret.reserve(n);
    for (int i = 0; i < n; ++i) {
      if (ret.empty()) {
        ret.push_back(nums[i]);
        continue;
      }
      int a = ret.back();
      int b = nums[i];
      if (gcd(a, b) == 1) {
        ret.push_back(b);
      } else {
        ret.pop_back();
        nums[i] = lcm(a, b);
        --i;
      }
    }
    return ret;
  }