class Solution {
public:
    int oddEvenJumps(vector<int>& arr) {
        
        int n=arr.size();
        vector<bool> oddjumps(n,false);
        vector<bool> evenjumps(n,false);
        oddjumps[n-1]=true;
        evenjumps[n-1]=true;
        long long count=1;
        map<int,int> ourmap;
        ourmap[arr[n-1]]=n-1;
        for(int i=n-2;i>=0;i--){
            
            auto it=ourmap.lower_bound(arr[i]);
            if(it!=ourmap.end()){
                oddjumps[i]=evenjumps[it->second];
            }
            it=ourmap.upper_bound(arr[i]);
            if(it!=ourmap.begin()){
                it--;
                evenjumps[i]=oddjumps[it->second];
            }
            if(oddjumps[i]==true){
                count++;
            }
            ourmap[arr[i]]=i;
        }
        return count;
    }
};