class Solution {
public:
    int numWays(string s) {
        int same = 0;
        for (char c : s) {
            same += c - '0';
        }
        if (same % 3) return 0;
        same /= 3;
        long long r = 0;
        for (int i = 0, num = 0, p = 0, want = same << 1; p <= want && i + 1 < s.length(); ++i) {
            p += s[i] - '0';
            if (p == want) r += num;
            if (p == same) ++num;
        }
        return r % 1000000007;
        
    }
};