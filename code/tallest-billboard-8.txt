class Solution {
public:
    int tallestBillboard(vector<int>& rods) {
        
        unordered_map<int, int> res;
        
        res[0] = 0;
        unordered_map<int, int> tmp;
        
        for (auto &r : rods)
        {
            tmp = res;
            
            for (auto &it : tmp)
            {
                int key = it.first;
                res[key+r] = std::max(res[key+r], tmp[key]+r);
                res[key-r] = std::max(res[key-r], tmp[key]);
            }
        }
        return res[0];
    }
};