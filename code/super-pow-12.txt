class Solution {
public:
    const int MOD = 1337;

    int superPow(int a, vector<int>& b) {
        int n = b.size();
        int ret = 1;
        
        for (int i = n-1; i >= 0; i--)
        {
            ret = ret * pow_help(a, b[i]) % MOD;
            a = pow_help(a, 10);
        }
        
        return ret;
    }
    
    int pow_help(int a, int b)
    {
        int ret = 1;
        a %= MOD;
        
        while (b > 0)
        {
            if (b & 1)
                ret = ret * a % MOD;
            
            b >>= 1;
            a = a * a % MOD;
        }
        
        return ret;
    }
};