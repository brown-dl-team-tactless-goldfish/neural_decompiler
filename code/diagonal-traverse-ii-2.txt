class Solution {
public:
    vector<int> findDiagonalOrder(vector<vector<int>> &nums){
        
        vector<int> ans;

        map<int, vector<pair<int, int>>> mp;
        for(int i=0;i<nums.size();i++){
            for(int j=0;j<nums[i].size();j++) mp[i+j].push_back({j, nums[i][j]});
        }

        for(auto &x: mp){
            sort(x.second.begin(), x.second.end());
            for(auto &y: x.second) ans.push_back(y.second);
        }

        return ans;

    }
};