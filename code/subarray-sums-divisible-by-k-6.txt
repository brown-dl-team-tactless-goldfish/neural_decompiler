int subarraysDivByK (int* A, int ASize, int K) {
	int    i, j, sum, cnt = 0;
	short *map = calloc(K, sizeof(short));
    
	map[0]++;
    sum = 0;
	for (i = 0; i < ASize; i++) {
		sum = (sum + A[i]) % K;
		if (sum < 0) sum = (sum + K) % K;
        cnt += map[sum];
        map[sum]++;
	}
    
    free(map);
	return cnt;
}