public class Solution {
    public IList<int> PathInZigZagTree(int label) {
        IList<int> res = new List<int>();
        Stack<int> s = new Stack<int>();
        
        while (label != 0)
        {
            s.Push(label);
            label /= 2;
        }
        
        while (s.Count > 0)
            res.Add(s.Pop());
        
        for (int i = res.Count % 2 == 0 ? 0 : 1; i < res.Count - 1; i += 2)
            res[i] = (int)Math.Pow(2, i + 1) - 1 - (res[i] - (int)Math.Pow(2, i));
        
        return res;
    }
}