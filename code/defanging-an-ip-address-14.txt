char * defangIPaddr(char * address){
    const int slen = strlen(address);
    const int len = slen + 6;
    char* res = malloc(len + 1);
    int i = 0;
    for (int k = 0; k < slen; ++k) {
        char c = address[k];
        if (c == '.') {
            res[i++] = '[';
            res[i++] = '.';
            res[i++] = ']';
        } else {
            res[i++] = c;   
        }
    }
    res[len] = '\0';
    return res;
}