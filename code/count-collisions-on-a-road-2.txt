class Solution {
public:
    int countCollisions(string directions) {
        stack<char> road;
        int ans = 0;
        for (auto& c : directions)
        {
            if (c == 'L')
            {
                if (road.empty())
                    continue;
                else if (road.top() == 'S')
                    ans += 1;
                else if (road.top() == 'R')
                {
                    ans += 2;
                    road.pop();
                    while (!road.empty())
                    {
                        ans += 1;
                        road.pop();
                    }
                    road.push('S');
                }
            }
            else if (c == 'R')
            {
                while (!road.empty() && road.top() == 'S')
                    road.pop();
                road.push('R');
            }
            else
            {
                while (!road.empty())
                {
                    if (road.top() == 'R')
                        ans += 1;
                    road.pop();
                }
                road.push('S');
            }
        }
        return ans;
    }
};