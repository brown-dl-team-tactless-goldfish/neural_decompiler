class Solution {
public:
    int sumOfBeauties(vector<int>& nums) {
        int size = nums.size();
        vector<int> max_from_left(size);
        vector<int> min_from_right(size);
        int maxv = INT_MIN, minv = INT_MAX;
        for(int i = 0, j = size-1 ; i < size ; i++,j--) {
            maxv = max(maxv, nums[i]);
            max_from_left[i] = maxv;
        }
		for(int j = size -1 ; j >= 0 ; j--) {
		    minv = min(minv, nums[j]);
            min_from_right[j] = minv;
		}
        int res = 0;
        for(int i = 1 ; i < size-1 ; i++) {
            if(nums[i] > max_from_left[i-1] && nums[i] < min_from_right[i+1])
                res+=2;
            else if((nums[i+1] > nums[i]) && (nums[i] > nums[i-1]))
                res++;
        }
        return res;
    }
};