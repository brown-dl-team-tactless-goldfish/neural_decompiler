public class Solution {
    private int res = 0;
    private bool[] visited = null;
    
    public int CountArrangement(int n) {
        visited = new bool[n + 1];
        
        Bracktrack(n, 1);
        
        return res;
    }
    
    private void Bracktrack(int n, int ind)
    {
        if (n + 1 == ind)
        {
            res++;
            return;
        }
        
        for (int i = 1; i <= n; i++)
            if (!visited[i] && (i % ind == 0 || ind % i == 0))
            {
                visited[i] = true;                
                Bracktrack(n, ind + 1);                
                visited[i] = false;
            }
    }
}