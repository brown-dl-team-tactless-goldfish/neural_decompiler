class Solution {
public:
    vector<vector<int>> matrixBlockSum(vector<vector<int>>& mat, int k) {
        int r = mat.size();
        int c = mat[0].size();
        
        vector<vector<int>> result(r, vector<int>(c, 0));
        
        for(int i = 0; i < r; i++)
        {
            for(int j = 0; j < c; j++)
            {
                int sum = 0;
                for(int l = i - k; l <= i + k; l ++)
                {
                    for(int m = j - k; m <= j + k; m++)
                    {
                        if(l >= 0 and m >= 0 and l < r and m < c)
                        {
                            sum += mat[l][m]; 
                        }
                    }
                }
                result[i][j] = sum;
            }
        }
        
        return result;
    }
};