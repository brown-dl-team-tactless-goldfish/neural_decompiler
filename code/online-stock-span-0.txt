typedef struct {
    int data[100000];
    int cur;
    int last;
} StockSpanner;


StockSpanner* stockSpannerCreate() {
    StockSpanner *ret = malloc(sizeof(StockSpanner));
    ret->cur = 0;
    ret->last = -1;
    return ret;
}

int stockSpannerNext(StockSpanner* obj, int price) {
    obj->data[obj->cur] = price;
    
    int ans = 1;
    if(obj->cur == 0 || price < obj->data[obj->cur -1]){
        obj->last = obj->cur;
        ans = 1;
    }
    else{
        int k;
        for(k = obj->last; k >=0; k--){
            if(obj->data[k] > price){
                break;
            }
        }
        obj->last = k+1;
        ans = obj->cur - obj->last + 1;
    }
    (obj->cur) += 1;
    return ans;
}

void stockSpannerFree(StockSpanner* obj) {
    free(obj);    
}