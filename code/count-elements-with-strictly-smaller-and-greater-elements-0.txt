int cmp(const void* a, const void* b) {
    return *(const int*) a - *(const int*) b; 
}

int countElements(int* nums, int numsSize) {
    if(numsSize == 1) return 0;
    
    qsort(nums, numsSize, sizeof(int), cmp);
    int ans = 0;
    for(int i = 1; i+1 < numsSize; i++) {
        int posf = i+1, posb = i-1;
        if(nums[i] == nums[posb]) {
            while(posb > 0 && nums[i] == nums[posb]) {
                posb--;
            }
        }
        if(nums[i] == nums[posf]) {
            while(posf < numsSize-1 && nums[i] == nums[posf]) {
                posf++;
            }
        }
        if(nums[i] < nums[posf] && nums[i] > nums[posb]) ans++;
    }
    return ans;
}