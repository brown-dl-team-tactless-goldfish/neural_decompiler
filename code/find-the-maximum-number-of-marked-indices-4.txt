class Solution 
{
public:
    int maxNumOfMarkedIndices(vector<int>& nums) 
    {
        sort(nums.begin(), nums.end());

        int n = nums.size();
        int lo = 0, hi = n / 2;

        while (lo < hi)
        {
            int md = (lo + hi + 1) / 2; // make `md` stick with hi to avoid infinite loop

            int i = 0;
            for (; i < md; ++i)
            {
                if (nums[i] * 2 > nums[n - md + i])
                {
                    break;
                }
            }

            if (i < md)
            {
                hi = md - 1;
            }
            else
            {
                lo = md;
            }
        }

        return lo * 2;
    }
};