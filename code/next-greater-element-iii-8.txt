class Solution {
private:
    void swap(char *a, char *b) {
        char c = *a; *a = *b; *b = c;
    }
    
    void rev(string &s, int i, int j) {
        while(i < j) {
            swap(&s[i], &s[j]);
            i++; j--;
        }
    }
public:
    int nextGreaterElement(int n) {
        if (n < 10)
            return -1;
        
        string ns = to_string(n);
        int idx, N = ns.size();
        for (int i = N-2; i >= 0; --i) {
            if (ns[i] < ns[i+1]) {
                for (int j = i+1; j < N; ++j) {
                    if (ns[j] > ns[i])
                        idx = j;
                }
                swap(&ns[i], &ns[idx]);
                rev(ns, i+1, N-1);
                long ans = stol(ns);
                if (ans > INT_MAX)
                    return -1;
                return ans;
            }
        }
        return -1;
    }
};