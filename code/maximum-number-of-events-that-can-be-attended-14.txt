class Solution {
public:
    int maxEvents(vector<vector<int>>& events) {
        sort(events.begin(), events.end());
        int n = events.size(), i = 0, d, ans = 0;
        priority_queue<int,vector<int>, greater<int>> q;
        while(i<n || (i>=n && q.size() != 0))
        {
            if(q.size()==0 && i<n)
                d = events[i][0];
            while(i<n && events[i][0]<=d && d<=events[i][1])
                q.push(events[i++][1]);
            while(q.size() > 0 && q.top()<d)
                q.pop();
            if (q.size() > 0)
            {
                q.pop();
                ans++;
            }
            d++;
        }
        return ans;
    }