class Solution {
public:
   int minScoreTriangulation(vector<int>& A) {
      v = move(A);
      const int n = v.size();
      vdp = vector<vector<int>>(n, vector<int>(n, -1));
      return dp(0, n-1);
   }

   int dp(int i, int j) {
      if (j - i < 2) return 0;
      if (vdp[i][j] > 0) return vdp[i][j];
      int minScore = 1e9;
      for (int k = i+1; k < j; k++) {
         int prod = v[i] * v[j] * v[k];
         int score = prod + dp(i, k) + dp(k, j);
         minScore = min(minScore, score);
      }
      return vdp[i][j] = minScore;
   }

   vector<int> v;
   vector<vector<int>> vdp;
};