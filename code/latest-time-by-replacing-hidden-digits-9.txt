class Solution {
public:
    string maximumTime(string time) {
        // We need to check hour and minute separately. Scenarios:
        // Hour: 1) ?? -> 23; 2) ?[0-3] -> 2[0-3]; 3) ?[4-9] -> 1[4-9]; 4) [0-1]? -> [0-1]9; 5) 2? -> 23.
        // Minute: 1) ?? -> 59; 2) [1-5]? -> [1-5]9; 3) ?[0-9] -> 5[0-9].
        string hr = time.substr(0, 2), min = time.substr(3);
        if (hr == "??")
        {
            hr = "23";
        }
        else if (hr[0] == '?')
        {
            hr[0] = hr[1] <= '3' ? '2' : '1';
        }
        else if (hr[1] == '?')
        {
            hr[1] = hr[0] <= '1' ? '9' : '3';
        }
        
        if (min == "??")
        {
            min = "59";
        }
        else if (min[1] == '?')
        {
            min[1] = '9';
        }
        else if (min[0] == '?')
        {
            min[0] = '5';
        }
        
        return hr + ":" + min;
    }
};