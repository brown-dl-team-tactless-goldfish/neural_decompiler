class Solution {
    // Row
    vector<int> get_row(int i, vector<vector<int>>& v){
        return v[i];
    }
    // Cloumn
    vector<int> get_col(int j, vector<vector<int>>& v){
        vector<int> u;
        int l = v.size();
        for(int i=0; i<l; ++i){
            u.push_back(v[i][j]);
        }
        return u;
    }
public:
    int equalPairs(vector<vector<int>>& grid) {
        map<vector<int>,int> m;
        int l = grid.size();
        for(int i=0; i<l; ++i){
            vector<int> v = get_row(i,grid);
            m[v]++;
        }
        int c=0;
        for(int j=0; j<l; ++j){
            vector<int> v = get_col(j,grid);
            if(m.find(v) != m.end()) c += m[v];
        }
        return c;
    }
};