using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace _1542_longest_substring
{
    class Program
    {
        static void Main(string[] args)
        {
            var max = LongestAwesome("9498331");
            Debug.Assert(max == 3);
        }

        /// <summary>
        /// study code:
        /// https://leetcode.com/problems/find-longest-awesome-substring/discuss/779893/C%2B%2BJavaPython3-with-picture-(similar-to-1371)
        /// Learn to convert Java code to C# code
        /// </summary>
        /// <param name="s"></param>
        /// <returns></returns>
        public static int LongestAwesome(string s)
        {
            // design: 2^0, ..., 2^9, so 2^10 = 1024, minimum upper bound
            var dp = new int[1024];

            var length = s.Length;
            //Arrays.fill(dp, s.length()); - Google Java Arrays.fill C# analog -> 
            dp = Enumerable.Range(0, 1024).Select(i => length).ToArray();

            int result = 0;  // default value is zero
            var mask = 0;
            dp[0] = -1;

            for (int i = 0; i < length; ++i)
            {
                mask ^= 1 << (s[i] - '0');
                result = Math.Max(result, i - dp[mask]);

                for (int digit = 0; digit <= 9; ++digit)
                {
                    result = Math.Max(result, i - dp[mask ^ (1 << digit)]);
                }

                dp[mask] = Math.Min(dp[mask], i);
            }

            return result;
        }
    }
}