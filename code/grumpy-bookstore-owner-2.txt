class Solution {
public:
    int maxSatisfied(vector<int>& customers, vector<int>& grumpy, int X) {
        
        int n = customers.size();
        int direct_satisfied = 0, indirect_satisfied = 0;
        
        int i = 0, j = 0;
        for (i = 0; i < n; i++) {
            if (!grumpy[i]) {
                direct_satisfied += customers[i];
                customers[i] = 0;
            }
        }
        
        int sum = 0;
        for (i = 0; i < n; i++) {
            sum += customers[i];
            
            if (i-j >= X) {
                sum -= customers[j];
                j++;
            }
            
            indirect_satisfied = max(indirect_satisfied, sum);
        }
        
        return direct_satisfied + indirect_satisfied;
    }
};