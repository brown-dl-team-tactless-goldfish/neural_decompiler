typedef struct _ListNode {
    int val;
    struct _ListNode *next;
}ListNode;

ListNode* swapNodes(ListNode* head, int k){
    int count = 0, pos = 0, aux;
    ListNode *iterator = head;
    ListNode *prev, *new_node, *answer = NULL;
    
    while (iterator != NULL) {
        count++;
        iterator = iterator->next;
    }
    int support[count];
    iterator = head;
    while (iterator != NULL) {
        support[pos++] = iterator->val;
        iterator = iterator->next;
    }
    aux = support[k-1];
    support[k-1] = support[pos-k];
    support[pos-k] = aux;
    for (int i = 0; i < pos; i++) {
        new_node = (ListNode *) malloc (sizeof(ListNode));
        new_node->val = support[i];
        new_node->next = NULL;
        if (answer == NULL)
            answer = new_node;
        else 
            prev->next = new_node;
        prev = new_node;
    }
    return answer;
}