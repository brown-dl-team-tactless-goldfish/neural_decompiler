/**
 * Definition for a binary tree node.
 * struct TreeNode {
 *     int val;
 *     struct TreeNode *left;
 *     struct TreeNode *right;
 * };
 */

void dfs(struct TreeNode* node, int Parent, int Depth, int x, int *xDepth, int *xParent, int y, int *yDepth, int *yParent)
{
    if(!node)
        return;
    
    if(x==node->val)
    {
        *xDepth = Depth;
        *xParent = Parent;
    }
    else if(y==node->val)
    {
        *yDepth = Depth;
        *yParent = Parent; 
    }
    
    if(*xDepth!=-1 && *yDepth!=-1)
        return;
    
    dfs(node->left, node->val, Depth+1, x, xDepth, xParent, y, yDepth, yParent);
    dfs(node->right, node->val, Depth+1, x, xDepth, xParent, y, yDepth, yParent);
    
}

bool isCousins(struct TreeNode* root, int x, int y) {
    
    int xDepth=-1, xParent=0, yDepth=-1, yParent=0;
    
    dfs(root, 0, 0, x, &xDepth, &xParent, y, &yDepth, &yParent);
    
    return xDepth==yDepth && xParent!=yParent;
}