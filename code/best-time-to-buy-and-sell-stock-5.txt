int maxProfit(int* prices, int pricesSize) {
int lastend = 0, maxsofar = 0;
if (pricesSize <= 1)
    return 0;

for (int i=1; i<pricesSize; i++) {
    lastend += prices[i] - prices[i-1];
    if (lastend < 0)
        lastend = 0;
    else if (lastend > maxsofar)
        maxsofar = lastend;
}
return maxsofar;