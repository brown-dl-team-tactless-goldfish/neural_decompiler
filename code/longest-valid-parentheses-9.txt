
int longestValidParentheses(char * s){
    int stack[300000];
    int results[300000] = {0};
    int stackp = -1;

    for (int i = 0; i < strlen(s); i++) {
        if ( s[i] == '(') {
            stackp++;
            stack[stackp] = i;
        }
        else if ( stackp != -1 ) {
            results[stack[stackp]] = -1;
            results[i] = -1;
            stackp--;

        }
    }

    int tmp_streak = 0, max_streak = 0;
    for (int j = 0; j < strlen(s); j++) {
        if ( results[j] == -1) {
            tmp_streak += 1;
        }
        else {
            max_streak = max_streak > tmp_streak ? max_streak : tmp_streak;
            tmp_streak = 0;
        }
    }
    return max_streak > tmp_streak ? max_streak: tmp_streak;
}
