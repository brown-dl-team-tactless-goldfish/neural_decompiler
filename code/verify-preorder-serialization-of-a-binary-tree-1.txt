bool isValidSerialization(char *preorder)
{
    char *p;
    int diff = 1;

    p = strtok(preorder, ",");
    while (p) {
        if (--diff < 0)
            return false;
        if (strcmp(p, "#"))
            diff += 2;
        p = strtok(NULL, ",");
    }

    return diff == 0;
}