with cte
as
(
    select 
        product_id, max(change_date) change_date 
    from Products
    where change_date <= '2019-08-16'
    group by product_id
)    

select distinct
        p.product_id,
        case 
            when c.change_date is null then 10
            else p.new_price 
        end as price 
from Products p
join cte c on 
    p.product_id = c.product_id and 
    p.change_date = c.change_date
union all
select distinct p.product_id, 10
from Products p
left join cte c on p.product_id = c.product_id
where c.product_id is null