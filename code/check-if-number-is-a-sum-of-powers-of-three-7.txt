public bool CheckPowersOfThree(int n)
{
	HashSet<int> results = new HashSet<int>();
	results.Add(0);

	for (int i = 0; i < 16; i++)
	{
		if (dfs(n, i, results))
		{
			return true;
		}
	}

	return false;
}

private bool dfs(int n, int index, HashSet<int> results)
{
	if (index == 16)
	{
		return false;
	}

	HashSet<int> nextResults = new HashSet<int>();
	for(int i = index; i < 16; i++)
	{
		foreach (var result in results)
		{
			var next = result + (int)Math.Pow(3, i);

			if (next == n)
			{
				return true;
			}

			if (next > n)
			{
				return false;
			}

			nextResults.Add(next);

			if (dfs(n, i + 1, nextResults))
			{
				return true;
			}

			nextResults.Remove(next);
		}
	}

	return false;
}