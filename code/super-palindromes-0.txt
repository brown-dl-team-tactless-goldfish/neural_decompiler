typedef long long ll;
class Solution {
public:
    void cal(ll pal,ll div,ll l,ll r,int& result) {
        string str;
        bool flag;
        while (div>0) {
            pal = pal*10 + div%10;
            div /= 10;
        }
        pal *= pal;
        if (pal>=l&&pal<=r) {
            str = to_string(pal);
            flag = true;
            for (int i=0; i<str.size()/2; ++i) {
                if (str[i] != str[str.size()-1-i]) {
                    flag = false;
                    break;
                }
            }
            if (flag) result++;
        }
    }
    int superpalindromesInRange(string L, string R) {
        ll pal, div;
        ll l = stoll(L), r = stoll(R); 
        int result = 0;
        for (int i=1; i<10000; ++i) { //长度为奇数
            pal = i, div = i;
            cal(pal,div,l,r,result);
        }
        for (int i=1; i<100000; ++i) { //长度为偶数
            pal = i, div = i/10;
            cal(pal,div,l,r,result);
        }
        return result;
    }
};``