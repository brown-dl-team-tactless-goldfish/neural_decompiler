int concatenatedBinary(int n){
    int mod = 1e9 +  7 ;
    unsigned long long ans =  1 ;
    int len = 2 ;
    int begin = pow(2, len-1) ;
    int end = pow(2, len) -1 ;
    while(1){
        for(int i = begin; i <= end; i++){
            if(i > n)
                goto exit ;
            ans = (ans << len) % mod ;
            ans = (ans + i) % mod ;   
        } 
        len++ ;
        begin = end + 1 ;
        end = pow(2, len) - 1 ;
    }
    exit :    
    return ans ;
}
