class Solution {
public:
    int numTimesAllBlue(vector<int>& light) {        
        int ans = 0;
        unordered_set<int> big;
        int small = 0;
        
        for(int i=1; i<=light.size(); i++) {
            if(light[i-1] > i) {
                big.insert(light[i-1]);
            } else {
                small++;
            }
            
            if(big.count(i)) {
                big.erase(i);   
                small++;
            } 
            
            if(small == i) ans++;
        }
        return ans;
    }
};