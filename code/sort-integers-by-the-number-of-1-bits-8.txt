int countSetBits (int num) {
    int count = 0;
    while (num) {
        num &= (num - 1);
        count++;
    }
    return count;
}

int cmpfunc (const void* a, const void* b) {
    int x = countSetBits(*(int*)a);
    int y = countSetBits(*(int*)b);
    if (x == y) 
        return *(int*)a - *(int*)b;
    
    return x - y;
}

int* sortByBits(int* arr, int arrSize, int* returnSize){
    qsort(arr, arrSize, sizeof(int), cmpfunc);
    
    *returnSize = arrSize;
    return arr;
}