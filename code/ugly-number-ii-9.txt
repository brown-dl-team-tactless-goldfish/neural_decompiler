#define fmin(a, b) (a < b ? a : b)

int nthUglyNumber(int n){
    int* result = (int*) malloc(sizeof(int) * n);
    
    int i2 = 0, i3 = 0, i5 = 0, itr;
    
    result[0] = 1, itr = 1;

    while (itr < n) {
        result[itr] = fmin(result[i2] * 2, fmin(result[i3] * 3, result[i5] * 5));
        
        if (result[itr] == result[i2] * 2) i2++;
        if (result[itr] == result[i3] * 3) i3++;
        if (result[itr] == result[i5] * 5) i5++;

        itr++;
    }

    return result[n - 1];
}