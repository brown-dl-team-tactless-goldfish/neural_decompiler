class Solution {
public:
    int countMaxOrSubsets(vector<int>& nums) {
        int maxOr = 0, res = 0;
        for(auto x:nums) maxOr |= x;
        dfs(nums, 0, res, maxOr, 0);
        return res;
    }

    void dfs(vector<int>& v, int i, int& res, int maxOr, int cur){
        if(i == v.size()){
            if(cur == maxOr) res++;
            return;
        }
        dfs(v, i+1, res, maxOr, cur);
        dfs(v, i+1, res, maxOr, cur|v[i]);
    }
};