#define max(a, b) (a > b ? a : b)

int helper(struct TreeNode* root, int *ans) // return depth
{
   if (!root) return 0;

    
   int l =  helper(root->left, ans); // depth of left subtree
   int r = helper(root->right, ans); // depth of right subtree
   int tmp = 1+max(l, r); // depth
   *ans = max(tmp, *ans); 
   *ans = max(*ans, 1+l+r); 
    
   return tmp;
}

int diameterOfBinaryTree(struct TreeNode* root){
    int ans = 0;
    helper(root, &ans);
    return ans-1;
}