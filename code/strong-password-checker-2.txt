#include <stdio.h>
#include <string.h>

int strongPasswordChecker(char* s) {
int len = strlen(s);
if(len < 2) {
    return 6 - len;
}

char end = s[0];
int upper = (end >= 'A' && end <= 'Z');
int lower = (end >= 'a' && end <= 'z');
int digit = (end >= '0' && end <= '9');
int end_rep = 1;
int change = 0;
int delete[3] = {0};

for(int i = 1; i < len; i++) {
    if(s[i] == end) {
        end_rep++;
    } else {
        change += end_rep / 3;
        if(end_rep / 3 > 0) {
            delete[end_rep % 3]++;
        }
        end = s[i];
        upper = upper || (end >= 'A' && end <= 'Z');
        lower = lower || (end >= 'a' && end <= 'z');
        digit = digit || (end >= '0' && end <= '9');
        end_rep = 1;
    }
}
change += end_rep / 3;
if(end_rep / 3 > 0) {
    delete[end_rep % 3]++;
}

int check_req = (upper ? 0 : 1) + (lower ? 0 : 1) + (digit ? 0 : 1);

if(len > 20) {
    int del = len - 20;

    if(del <= delete[0]) {
        change -= del;
    } else if(del - delete[0] <= 2 * delete[1]) {
        change -= delete[0] + (del - delete[0]) / 2;
    } else {
        change -= delete[0] + delete[1] + (del - delete[0] - 2 * delete[1]) / 3;
    }

    return del + (check_req > change ? check_req : change);
} else {
    return (6 - len > check_req ? 6 - len : check_req) > change ? (6 - len > check_req ? 6 - len : check_req) : change;
}
}

