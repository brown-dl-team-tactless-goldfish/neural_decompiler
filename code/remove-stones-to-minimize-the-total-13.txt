class Solution {
public:
    int minStoneSum(vector<int>& piles, int k) {
        priority_queue<int> maxHeap;
        int psum = 0;
        for (int &x: piles) {
            maxHeap.push(x);
            psum += x;
        }
        int res = 0;
        while (min(k, (int)maxHeap.size()) > 0) {
            int top = maxHeap.top();
            maxHeap.pop();
            psum -= top;
            if (top == 0) continue;
            --k;
            psum += top - (top / 2);
            maxHeap.push(top - (top / 2));
        }
        return psum;
    }
};