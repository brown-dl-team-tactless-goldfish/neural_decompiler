public class Solution {
    public double MaxAverageRatio(int[][] classes, int extraStudents) {
        
        var set = new SortedSet<(double delta, int index, double pass, double total)>();
        int index = 0;
        
        double avg = 0.0;
        foreach(var cl in classes)
        {
            double a = cl[0], b = cl[1];
            avg += a/b;              
            set.Add((GetDeltaGain(a, b), index++, a + 1, b + 1)); //gotcha
        }
        
        while(extraStudents-- > 0)
        {            
            var max = set.Max;
            set.Remove(set.Max);            
            avg += max.delta;
            set.Add((GetDeltaGain(max.pass, max.total), index++, max.pass + 1, max.total + 1));           
        }       
       
        return avg/classes.Length;
    }
    
    private double GetDeltaGain(double a, double b)
    {
        return (a + 1)/(b + 1) - a/b; //gotcha gotcha gotcha -- BRACKETS
    }
}