class Solution {
public:
    int sumOfBeauties(vector<int>& nums) {
        int sum=0,n=nums.size();
        // left[i] = max({nums[0],nums[1],....nums[i]})
        // right[i] = min({nums[n-1],nums[n-2],...nums[i]})
        vector<int>left(n),right(n);
        for(int i=0;i<n;i++) {
            left[i]=(i==0?nums[i]:max(left[i-1],nums[i]));
            int j=n-i-1;
            right[j]=(j==n-1?nums[j]:min(right[j+1],nums[j]));
        }
        for(int i=1;i<=n-2;i++) {
            if(nums[i]>left[i-1] && nums[i]<right[i+1]) {
                sum+=2;
            }
            else if(nums[i]>nums[i-1] && nums[i]<nums[i+1]) {
                sum+=1;
            }
        }
        return sum;
    }
};