class Solution {
public:
    #define ll long long int
    int countPairs(vector<int>& a) {
        int n = a.size();
        vector<ll>power;
        set<ll>s;
        map<ll,ll>mp;
        for(auto i : a)
            mp[i]++ , s.insert(i);
        
        for(int i = 0 ; i < 25 ;i++)
        {
            power.push_back(pow(2,i));
        }
       // map<ll,ll>mp;
        ll ans = 0 ;
        ll mod = 1000000007;
        for(auto i : s)
        {
            for(int j=0;j<power.size();j++)
            {
                if(power[j] - i>=0){
                if(mp.find(abs(power[j] - i)) != mp.end())
                {   
                    if(i * 2 == power[j])
                    {
                      //  cout<<power[j]<<" "<<i<<endl;
                        ans =(ans + (mp[i]*(mp[i] - 1)/2))%mod;
                    }
                    else
                    {
                         ll diff  = power[j] - i ; 
                        if(diff > i){
                          //  cout<<power[j]<<" "<<i<<endl;
                        ans =(ans +  min(mp[i] , mp[abs(power[j] - i)]) * max(mp[i] , mp[abs(power[j] - i)]))%mod;
                        }
                    }
                }
                }
                    
            }
                
        }
        //ans = ans / 2 ; 
        return ans%mod;
    }
};