typedef struct TreeNode TreeNode;

int depth(TreeNode* root) {
    if (!root) return 0;
    
    int l = depth(root->left);
    if (l < 0) return -1;
    
    int r = depth(root->right);
    if (r < 0) return -1;
    
    int mx = l;
    int mn = r;
    
    if (l < r) {
        mx = r;
        mn = l;
    }
    
    if (mx - mn > 1) return -1;
    
    return mx + 1;
}

bool isBalanced(struct TreeNode* root){
    return depth(root) != -1;
}