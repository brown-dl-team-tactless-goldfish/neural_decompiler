public class Solution
    {
        public int GetMoneyAmount(int n)
        {
            checked
            {

                if (n <= 1)
                {
                    return 0;
                }

                int[,] dp = new int[n + 1, n + 1];
                dp[0, 0] = 0;
                dp[1, 0] = 0;

                for (int i = 1; i <= n; i++)
                {
                    dp[i, i] = 0;
                }

                for (int length = 2; length <= n; length++)
                {
                    for (int start = 1; start <= n; start++)
                    {
                        int end = start + length - 1;

                        if (end > n)
                        {
                            break;
                        }

                        dp[start, end] = int.MaxValue;

                        for (int k = start; k <= end; k++)
                        {
                            dp[start, end] = Math.Min(dp[start, end], k + Math.Max(
                                                                          ((k == start) ? 0 : dp[start, k - 1]),  
                                                                          ((k == end) ? 0 : dp[k + 1, end])
                                                                          ));
                        }
                    }
                }

                return dp[1, n];
            }
        }
    }