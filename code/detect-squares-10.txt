class DetectSquares {
public:
    unordered_map<int, unordered_map<int, int>> x_mp;
    DetectSquares() {
        
    }
    
    void add(vector<int> p) {
        x_mp[p[0]][p[1]]++;
    }
    
    int count(vector<int> p) {
        int x = p[0], y = p[1], res = 0;
        if(x_mp.find(x) == x_mp.end()) return 0;
        for(auto & [nxt_y, cnt_x] : x_mp[x]) {
            if(nxt_y != y) {
                int len = abs(y - nxt_y), y1 = y, y2 = nxt_y, x1 = x-len, x2 = x + len;
                res += x_mp[x][y2]*x_mp[x1][y1]*x_mp[x1][y2];
                res += x_mp[x][y2]*x_mp[x2][y1]*x_mp[x2][y2];
            }
        }
        return res;
    }
};

/**
 * Your DetectSquares object will be instantiated and called as such:
 * DetectSquares* obj = new DetectSquares();
 * obj->add(point);
 * int param_2 = obj->count(point);
 */