class Solution {
public:
    vector<double> medianSlidingWindow(vector<int>& nums, int k) {
        vector<double>ans;
        vector<int>v;
        for(int i = 0;i < k - 1;i++){
            v.insert(lower_bound(v.begin(),v.end(),nums[i]),nums[i]);
        }
        for(int i = k - 1;i < nums.size();i++){
            v.insert(lower_bound(v.begin(),v.end(),nums[i]),nums[i]);
            if(k % 2) ans.push_back(double (v[k / 2]));
            else ans.push_back(double (v[(k - 2) / 2] + v[k / 2]) / 2);
            v.erase(lower_bound(v.begin(),v.end(),nums[i - k + 1]));
        }
        return ans;
    }
};