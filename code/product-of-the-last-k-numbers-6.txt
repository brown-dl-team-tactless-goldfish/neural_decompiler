public class ProductOfNumbers 
{
    List<int[]> freq;
    public ProductOfNumbers() 
    {
        freq = new List<int[]>();
        freq.Add(new int[101]);
    }
    
    public void Add(int num) 
    {
        var arr = (int[]) freq[freq.Count - 1].Clone();
        arr[num]++;
        freq.Add(arr);
    }
    
    public int GetProduct(int k) 
    {
        int n = freq.Count, sum = 1;
        int[] arr1 = freq[n - 1], arr2 = freq[n - 1 - k];
        for(int i = 0; i <= 100; i++)
            sum *= (int) Math.Pow(i, arr1[i] - arr2[i]);
        return sum;
    }
}