    int row = grid.size(),sum, col=grid[0].size(), ones,zeros,p,ans=0,j,i;
    
    for( i=0; i<row; i++)
    {
        
        if(grid[i][0] == 0)
        {
            
            for(int j=0; j<col; j++)
            {
                grid[i][j] = 1 - grid[i][j];
                
            }
        }
    }
    
    for( i=0; i<col; i++)
    {
        
        ones = 0;
        zeros = 0;
        
        for( j=0; j<row; j++)
        {
            if(grid[j][i] == 1)
            {
                ones++;
            }
            else
            {
                zeros++;
            }
        }
        
        if(zeros> ones)
        {
            for( j=0; j<row; j++)
            {
                grid[j][i] = 1 - grid[j][i];
            }
        }
    }
    
    for( i=0; i<row; i++)
    {
        
        p = 0;
        
        sum = 0;
        
        for( j=col-1; j>=0; j--)
        {
            
          sum = sum + grid[i][j] * pow(2,p);
            
            p++;
        }
        
        ans = ans + sum;
    }
    
    return ans;
    
}