class Solution {
public:
    int countValidWords(string s) {
        stringstream ss(s);
        string word;
        int cnt = 0;
        while(ss >> word){
            // cout<<word<<endl;
            int flg = 1 , n = size(word);
            for(int i=0;i<n;++i){
                if(word.find("!") < n-1 or word.find(".") < n-1 or word.find(",") < n-1){
                    flg = 0;
                    break;
                }
                else if(word.find("-") == 0 or word.find("-") == n-1 or
                   count(word.begin(),word.end(),'-') > 1){
                    flg = 0;
                    break;
                }
                else if(word[i]>='0' and word[i]<='9'){
                    flg = 0;
                    break;
                }
                
                else if(count(word.begin(),word.end(),'-') == 1){
                    // cout<<"in ";
                    int idx = word.find("-");
                    // cout<<idx<<" ";
                    if(word[idx+1]=='!' or word[idx+1] == '.' or word[idx+1] == ','){
                        // cout<<"in";
                        flg = 0;
                        break;
                    }
                }
            }
            if(flg){
                cnt++;
                // cout<<word<<endl<<endl;
            }
        }
        
        return cnt;
    }
};