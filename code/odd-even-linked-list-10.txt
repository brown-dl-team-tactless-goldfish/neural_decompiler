struct ListNode* oddEvenList(struct ListNode* head){
    if (head == NULL) {
        return NULL;
    }
    struct ListNode *p[10000], *p1 = head;
    int count = 0;
    
    while (p1) {
        p[count] = p1;
        count++;
        p1 = p1->next;
    }
    
    if (count == 1) {
        return head;
    }
    
    for (int i=0; i<count; i+=2) {
        p[i]->next = p[i+2];
    }
    
    for (int i=1; i<count; i+=2) {
        p[i]->next = p[i+2];
    }
    if (count % 2 == 0) {
        p[count-2]->next = p[1];
        p[count-1]->next = NULL;
    } else {
        p[count-1]->next = p[1];
        p[count-2]->next = NULL;
    }
    head = p[0];
    
    return head;
}