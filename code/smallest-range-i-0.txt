#define MIN(a, b) ((a) < (b) ? (a) : (b))
#define MAX(a, b) ((a) > (b) ? (a) : (b))

int smallestRangeI(int* nums, int numsSize, int k) {
    int min = nums[0], max = nums[0];
    for (int i = 1; i < numsSize; i++) {
        min = MIN(min, nums[i]);
        max = MAX(max, nums[i]);
    }
    int ans = max - k - min - k;
    return ans < 0 ? 0 : ans;
}