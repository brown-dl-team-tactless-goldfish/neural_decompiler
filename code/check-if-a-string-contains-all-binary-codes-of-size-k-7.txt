bool hasAllCodes (char * s, int k) {
    int   i, cnt = 0, code = 0, len = 1<<k, mask = len-1;
    char  map[1<<20] = {0};
    
    for (i = 0; s[i] && i < k; i++) {
        code = (code << 1) | (s[i] - '0'); 
    }
    
    if (i < k) {
        return false;
    }
    
    map[code] = 1;
    cnt = 1;
    
    for (i = k; s[i]; i++) {
        code = ((code << 1) | (s[i] - '0')) & mask;
        if (map[code] == 0) {
            map[code] = 1;
            if (++cnt == len) {
                return true;
            }
        }
    }
    
    return false;
}