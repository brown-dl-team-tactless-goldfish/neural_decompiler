class Solution {
public:
    int maxChunksToSorted(vector<int>& a) {
        int chunks = 0;
        multiset<int> cur;
        multiset<int> expect;
        vector<int> sorted = a;
        sort(sorted.begin(), sorted.end());
        for (int i = 0; i < a.size(); i++) {
            expect.insert(sorted[i]);
            cur.insert(a[i]);
            if (cur == expect) chunks++;
        }
        return chunks;
    }
};