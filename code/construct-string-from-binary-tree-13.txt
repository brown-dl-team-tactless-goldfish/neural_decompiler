public class Solution {
    private StringBuilder res = new StringBuilder();
    
    public string Tree2str(TreeNode t) {
        if (t == null)
            return string.Empty;
        
        DFS(t, true);
        
        return res.ToString();
    }
    
    private void DFS(TreeNode node, bool isRoot)
    {
        if (!isRoot)
            res.Append("(");
        
        res.Append(node.val);
        
        if (node.left == null && node.right != null)
            res.Append("()");
        else if (node.left != null)
            DFS(node.left, false);
        
        if (node.right != null)
            DFS(node.right, false);
        
        if (!isRoot)
            res.Append(")");
    }
}