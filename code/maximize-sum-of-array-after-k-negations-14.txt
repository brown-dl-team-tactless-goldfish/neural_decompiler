public int LargestSumAfterKNegations(int[] A, int K) {
	var n = A.Length;
	var negatives = 0;
	var minAbs = A[0] > 0 ? A[0] : -A[0];

	for (var i = 0; i < n; i++) {
		var abs = A[i];

		if (abs < 0) {
			negatives++;
			abs = -abs;
		}

		if (abs < minAbs)
			minAbs = abs;
	}

	for (var i = 0; i < n - 1; i++) {
		for (var j = i + 1; j < n; j++) {
			if (A[i] < A[j]) 
				continue;

			var tmp = A[i];
			A[i] = A[j];
			A[j] = tmp;
		}
	}

	for (var i = 0; i < negatives && K-- > 0; i++)
		A[i] = -A[i];

	var sum = 0;
	foreach (var a in A)
		sum += a;

	if (K > 0 && K % 2 == 1) 
		sum -= minAbs * 2;

	return sum;
}