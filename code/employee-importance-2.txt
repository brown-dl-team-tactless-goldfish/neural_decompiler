class Solution {
    private int res = 0;
    private Dictionary<int, int> importance = new Dictionary<int, int>();
    private Dictionary<int, List<int>> relationship = new Dictionary<int, List<int>>();
    private HashSet<int> visited = new HashSet<int>();
    
    public int GetImportance(IList<Employee> employees, int id) {
        if (employees == null || employees.Count == 0)
            return 0;
        
        foreach (var emp in employees)
        {
            if (!importance.ContainsKey(emp.id))
                importance.Add(emp.id, emp.importance);
            
            if (!relationship.ContainsKey(emp.id))
                relationship.Add(emp.id, new List<int>(emp.subordinates));
        }
        
        visited.Add(id);
        DFS(id);
        
        return res;
    }
    
    private void DFS(int cur)
    {
        res += importance[cur];
        
        foreach (var sub in relationship[cur])
            if (!visited.Contains(sub))
            {
                visited.Add(sub);
                DFS(sub);
            }
    }
}