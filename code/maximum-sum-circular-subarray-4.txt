int max(int x, int y)
{
    return x > y ? x : y;
}

int min(int x, int y)
{
    return x < y ? x : y;
}

int maxSubarraySumCircular(int* nums, int numsSize)
{
    int sum = 0;
    int currMax = 0;
    int maxSubArray = nums[0];
    int currMin = 0;
    int minSubArray = nums[0];
    for(int i = 0; i < numsSize; i++)
    {
        sum += nums[i];
        currMax = max(currMax, 0) + nums[i];
        maxSubArray = max(maxSubArray, currMax);
        currMin = min(currMin, 0) + nums[i];
        minSubArray = min(minSubArray, currMin);
    }
    return sum == minSubArray ? maxSubArray : max(maxSubArray, sum - minSubArray);
}