class Solution {
public:
    int maxTwoEvents(vector<vector<int>>& es) {
        int n = es.size(), ans = 0;
        map<int, int> dp;
        sort(es.begin(), es.end());
        dp[INT_MAX] = 0, dp[es.back()[0]] = es.back()[2];
        for (int i = n - 2; i >= 0; i--) 
            dp[es[i][0]] = max(dp[es[i + 1][0]], es[i][2]);
        for (int i = 0; i < n; i++)
            ans = max(ans, es[i][2] + dp.upper_bound(es[i][1])->second);
        return ans;
    }
};