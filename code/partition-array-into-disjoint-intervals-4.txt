using Map = map<int, int>;
class Solution {
public:
    int partitionDisjoint( vector<int>& A, Map L={}, Map R={} ){
        for( const auto value: A ) ++R[ value ];
        for( const auto value: A ){
            ++L[ value ]; if( --R[ value ] == 0 ) R.erase( value );
            if( L.rbegin()->first <= R.begin()->first )
                return accumulate( L.begin(), L.end(), 0,
                    []( int value, const Map::value_type& x ){ return value + x.second; });
        }
    }
};