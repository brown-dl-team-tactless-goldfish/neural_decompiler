node* res, * p = NULL;
res = (node*)malloc(sizeof(node));
res->next = NULL;
int c = 0, sum;
while (l1 || l2) {
    sum = 0;
    if (p == NULL)
        p = res;
    else {
        p->next = (node*)malloc(sizeof(node));
        p->next->next = NULL;
        p = p->next;
    }
    
    if (l1) {
        sum += l1->val;
        l1 = l1->next;
    }
    if (l2) {
        sum += l2->val;
        l2 = l2->next;
    }
    sum += c;
    c = sum < 10 ? 0 : 1;
    p->val = sum < 10 ? sum : (sum - 10);
}
if (c == 1) {
    p->next = (node*)malloc(sizeof(node));
    p->next->val = 1;
    p->next->next = NULL;
}
return res;