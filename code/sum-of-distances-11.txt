#define ll long long
class Solution {
public:
    vector<ll> distance(vector<int>& nums) 
    {
        int n = nums.size();
        unordered_map< int, vector<int> > table;
        for(int i = 0; i < n; i++)
            table[nums[i]].push_back(i);
        
        vector<ll> res(n);
        for(auto [val, arr] : table)
        {
            int m = arr.size();
            vector<ll> rightSum(m, 0);
            vector<ll> leftSum(m, 0);
            
            for(int i = 1; i < m; i++)
                leftSum[i] += (leftSum[i-1] + arr[i - 1]);
            
            for(int i = m-2; i >= 0; i--)
                rightSum[i] += (rightSum[i + 1] + arr[i + 1]);
            
            for(int i = 0; i < m; i++)
            {
                int index = arr[i];
                ll value = 0;
                value = rightSum[i] + 1LL*( 2*i + 1 - m )*arr[i] - leftSum[i];   
                res[index] = value;
            }
        }
        return res;
    }
};