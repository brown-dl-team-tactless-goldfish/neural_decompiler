int
rotate(const int x)
{
	static const char ROT[] = "015!!29!86";
	static buf[6];
	char *i;

	(void)snprintf(buf, 6, "%d", x);
	for (i = buf; *i != '\0'; ++i)
		if ((*i = ROT[*i - '0']) == '!')
			return x;

	return atoi(buf);
}

int
rotatedDigits(const int N)
{
	static int rot[10001];
	static int i = 1;

	for (; i <= N; ++i)
		rot[i] = rot[i - 1] + (rotate(i) != i);

	return rot[N];
}