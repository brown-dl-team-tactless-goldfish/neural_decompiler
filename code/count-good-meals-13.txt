#define MOD 1000000007

class Solution {
public:
    int countPairs(vector<int>& deliciousness) {
        std::unordered_map<int,int> m;
        int max_{1<<21}, count{0};
        for(const auto &n: deliciousness) {
            for(int sum{1}; sum <= max_; sum<<=1) {
                if(sum >= n && m.count(sum-n)) count = (count + m[sum-n])%MOD;
            }
            ++m[n];
        }
        return count;
    }
};