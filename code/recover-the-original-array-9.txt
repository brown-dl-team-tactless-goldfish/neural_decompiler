class Solution {
public:
    vector<int> recoverArray(vector<int>& nums) {
        sort(nums.begin(), nums.end()); 
        
        map<int, int> cnt; 
        for (auto& x : nums) ++cnt[x]; 
        
        vector<int> ans; 
        for (int i = 1; i < nums.size(); ++i) {
            int diff = nums[i] - nums[0]; 
            if (diff && diff % 2 == 0) {
                ans.clear(); 
                bool found = true; 
                map<int, int> freq = cnt; 
                for (auto& [k, v] : freq) {
                    if (v) {
                        if (freq[k + diff] < v) {found = false; break;}
                        freq[k+diff] -= v; 
                        for (; v; --v) ans.push_back(k+diff/2); 
                    }
                }
                if (found) break; 
            }
        }
        return ans; 
    }
};