// OJ: https://leetcode.com/contest/weekly-contest-218/problems/max-number-of-k-sum-pairs/
// Author: github.com/lzl124631x
// Time: O(N)
// Space: O(N)
class Solution {
public:
    int maxOperations(vector<int>& nums, int k) {
        unordered_map<int, int> m;
        for (int n : nums) m[n]++;
        int ans = 0;
        for (auto [n, cnt] : m) {
            if (k - n == n) ans += cnt / 2;
            else if (m.count(k - n))  {
                int c = min(cnt, m[k - n]);
                ans += c;
                m[n] -= c;
                m[k - n] -= c;
            }
        }
        return ans;
    }
};