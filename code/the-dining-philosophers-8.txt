class DiningPhilosophers {
public:
  DiningPhilosophers() {
  }

  void wantsToEat(int philosopher,
                  function<void()> pickLeftFork,
                  function<void()> pickRightFork,
                  function<void()> eat,
                  function<void()> putLeftFork,
                  function<void()> putRightFork) {
    
    unique_lock lk(m_mtx);
    m_cv.wait(lk, [this, philosopher](){ 
      return philosopher == m_count; 
    });
    pickLeftFork();
    pickRightFork();
    eat();
    putLeftFork();
    putRightFork();
    m_count = (m_count + 1) % 5;
    lk.unlock();
    m_cv.notify_all();
  }

private:
  int m_count{0};
  mutex m_mtx;
  condition_variable m_cv;
};