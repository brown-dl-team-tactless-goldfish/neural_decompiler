    public int MaxSumAfterPartitioning(int[] A, int K)
    {
        int len = A.Length;
        int[] d = new int[len + 1];
        for(int i = len - 1; i >= 0; i--) {
            int max = 0;
            for(int j = i; j <= len - 1 && j < i + K; j++) {
                max = Math.Max(max, A[j]);
                d[i] = Math.Max(d[i], max * (j - i + 1) + d[j + 1]);
            }
        }
        return d[0];
    }