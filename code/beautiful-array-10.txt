public class Solution {
    private static int[] big = new int[] {1};
    
    public int[] BeautifulArray(int N) {
        int[] res = new int[N];
        int len = big.Length, tmp;
        while(len < N) {
            int[] next = new int[2 * len];
            for(int i = 0; i < len; i++) {
                tmp = 2 * big[i];
                next[len + i] = tmp;
                next[i] = tmp - 1;
            }
            big = next;
            len <<= 1;
        }
        int j = 0;
        for(int i = 0; i < len; i++) {
            if(big[i] <= N) {
                res[j] = big[i];
                j++;
            }
        }
        return res;
    }
}