int sortB  (int *a,int *b){ return *a - *b; }
int sortA (int* a,int* b){ return b[0] - a[0]; }

int* rearrangeBarcodes(int* b, int size, int* rsize){
    *rsize = size;
    int A[size][2];
    int ASize = -1; 
    
	// Sort the array to make it easier to count.
    qsort(b, size, sizeof(int), sortB);

    for (int m = 0; m < size; m++){   
	    // Count the numbers and hold the values in a small array.
		// A[index][0] = count, A[index][1] = the number.
        if (m == 0 || b[m] != b[m-1]){
            ASize++;
            A[ASize][0] = 1;
            A[ASize][1] = b[m];
            continue;
        }
        A[ASize][0] += 1;
    }
    
    ASize++; // This is the size of A.
	
	// Sort A from biggest count to smallest count.
    qsort(A, ASize, sizeof(int*), sortA) ;
    
    int ptr = 0;
    
    for (int n = 0; n < size;n += 2){
        if (A[ptr][0] == 0) ptr++; 
        b[n] = A[ptr][1];
        A[ptr][0] -= 1;
    }
    
    for (int n = 1; n < size;n += 2){
        if (A[ptr][0] == 0) ptr++;       
        b[n] = A[ptr][1];
        A[ptr][0] -= 1;
    }
    
    return b;
}