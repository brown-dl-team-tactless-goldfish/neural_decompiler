int count = 0;
for (int i = 0; i < timeSeriesSize; i++) {
    if (i == (timeSeriesSize-1)) {
        count += duration;
    } else {
        if ((timeSeries[i+1]-timeSeries[i]) >= duration) {
            count += duration;
        } else if ((timeSeries[i+1]-timeSeries[i]) >= 0) {
            count += (timeSeries[i+1]-timeSeries[i]);
        } else
            count = count; 
    }
}
return count;