#include <ext/pb_ds/assoc_container.hpp> 
#include <ext/pb_ds/tree_policy.hpp>
using namespace __gnu_pbds; 
#define ordered_set tree<pair<int,int>, null_type,less<pair<int,int>>, rb_tree_tag,tree_order_statistics_node_update>
class Solution {
public:
    long long numberOfPairs(vector<int>& nums1, vector<int>& nums2, int diff) {
        long long res = 0;
        ordered_set s;
        
        int n = nums1.size();
        for(int j = 0; j<n; j++){
            pair<int,int> p = {nums1[j] - nums2[j] + diff + 1, INT_MIN};
            res += (s.order_of_key(p));
            s.insert({nums1[j] - nums2[j], j});
        }
        
        return res;
    }
};