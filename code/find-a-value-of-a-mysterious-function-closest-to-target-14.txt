public:
    int closestToTarget(vector<int>& arr, int target) {
        int size = arr.size();
        int l = 0, diff = INT_MAX; // l next to remove
        int mp[32] = {0}; // num of 0s at each bit
        auto add = [&] (int v) {
            for(int i = 0; i < 32; ++i)
                mp[i] += !((v >> i) & 0x1);
        };
        auto sub = [&] (int v) {
            for(int i = 0; i < 32; ++i)
                mp[i] -= !((v >> i) & 0x1);
        };
        auto toInt = [&]() {
            int v = 0;
            for(int i = 0; i < 32; ++i)
                v |= (mp[i] == 0) << i;
            return v;
        };
        for(int r = 0; r < size; ++r) {
            int x = arr[r];
            add(x);
            int cur = toInt();
            while(cur < target && l < r) {
                sub(arr[l]);
                l++;
                cur = toInt();
                diff = min(diff, abs(cur - target));
            }
            diff = min(diff, abs(cur - target));  
        }
        return diff;
    }