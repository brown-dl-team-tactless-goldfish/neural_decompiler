class Solution {
public:
  int longestWPI(vector<int>& hours) {
    unordered_map<int,int>table = {{0,-1}};
    int sum = 0, ans = 0;
    
    for(int i = 0; i != hours.size(); i++){
      if(table.count((sum += hours[i] > 8 ? 1 : -1) - 1)) ans = max(ans, i - table[sum - 1]);
      if(!table.count(sum)) table[sum] = i;
    }
    
    return sum > 0 ? hours.size() : ans;  
  }
};