int totalFruit(int* fruits, int fruitsSize){
    int left=0, right=0, count=0, n=0;
    int *basket = malloc(fruitsSize*sizeof(int));
    for(int i=0; i<fruitsSize; i++)
        basket[i] = 0;
    while(right < fruitsSize)
    {
        if(basket[fruits[right++]]++ == 0)
            n++;
        if(n > 2)
        {
            if(--basket[fruits[left++]] == 0)
                n--;
        }
        count = (count > right-left) ? count : right-left;
    }
    free(basket);
    return count;
}