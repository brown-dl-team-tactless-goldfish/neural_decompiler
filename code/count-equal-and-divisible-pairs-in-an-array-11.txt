int cmpFunc(const int* a, const int* b)
{
    return (*(int*)a - *(int*)b);
}

int countPairs(int* nums, int numsSize, int k){

    int count = 0;
#if 0
    qsort(nums, numsSize, sizeof(int), cmpFunc);

    for (int index = 0; index+1 < numsSize; index++)
    {
        if ((nums[index] == nums[index+1]) && !((index*(index+1)) % k))
        {
            count++;
        }
    }
#endif
    
    for (int index = 0; index < numsSize; index++)
    {
        for (int jIndex = 0; jIndex < numsSize; jIndex++)
        {
            if ((index < jIndex) && (nums[index] == nums[jIndex]) && (!((index * jIndex) % k)))
            {
                count++;
            }
        }
    }

    return count;
}