
; WITH Unq_Cust_Prod AS (
    SELECT customer_id
        ,Unq_product_count = Count(DISTINCT product_key) 
    FROM  dbo.Customer AS C 
    GROUP BY customer_id
)
,Products_Count AS (
    SELECT product_count = COUNT(*) 
    FROM Product
)

SELECT customer_id
FROM Unq_Cust_Prod A, Products_Count B
WHERE A.Unq_product_count = B.product_count