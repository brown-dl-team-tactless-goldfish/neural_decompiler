// Forward declaration of isBadVersion API.
bool isBadVersion(int version);

int firstBadVersion(int n) {
    int first = 0, last = n;
    long long int mid;
    while(last - first > 1)
    {
        mid = ((long long int)first+ (long long int)last) /2;   /* better alternative way in comments below */
        if(isBadVersion(mid))
           last = (int)mid;
        else
           first = (int)mid;
    }

    if(isBadVersion(first)) 
      return first;
    else 
      return last;
}