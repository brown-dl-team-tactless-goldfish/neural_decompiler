struct cmp {
    bool operator() (const vector<int> &a, const vector<int> &b) {
        return a[1] < b[1];
    }
};

class Solution {
public:
    int maximumWhiteTiles(vector<vector<int>>& tiles, int len) {
        int n = tiles.size(), total = 0;
        sort(tiles.begin(), tiles.end());
        
        vector<int> nums(n);
        for(int i=0; i<n; i++) {
            nums[i] = total;
            total += tiles[i][1] - tiles[i][0] + 1;
        }

        int ret = 0;

        for(int i=0; i<n; i++) {
            int end = tiles[i][0] + len - 1;
            int j = lower_bound(tiles.begin(), tiles.end(), vector<int>{end,end} ,cmp()) - tiles.begin();

            if(j == n) {
                ret = max(ret, total - nums[i]);
                break;
            }
            int re = (end >= tiles[j][0] ) ? end + 1 - tiles[j][0] : 0;
            ret = max(ret, nums[j] - nums[i] + re);
        }

        return ret;
    }
};