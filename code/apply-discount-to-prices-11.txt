class Solution {
public:
    string discountPrices(string sentence, int discount) {
        string ans;
        string w = "";
        for(int i = 0; i <= sentence.size(); i++){
            if(i == sentence.size()) ans += (checkWord(w, discount));
            else if(sentence[i] != ' ') w.push_back(sentence[i]);
            else{
                ans += (checkWord(w, discount) + " ");
                w = "";
            }
        }
        return ans;
    }

private:
    string checkWord(string word, int discount){
        if(word[0] != '$') return word;
        if(word.size() == 1) return word;
        string num = "";
        for(int i = 1 ; i < word.size(); i++){
            if(word[i] >= '0' && word[i] <= '9') num.push_back(word[i]);
            else return word;
        }
        double percent = (double)discount * (0.01);
        double output = stod(num) - stod(num) * percent;
        return "$" + to_string_with_precision(output);
    }
    
    string to_string_with_precision(const double a_value, const int n = 2){
        std::ostringstream out;
        out.precision(n);
        out << std::fixed << a_value;
        return out.str();
    }
    
};