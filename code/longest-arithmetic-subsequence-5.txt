int longestArithSeqLength(vector<int>& A, int res = 2) {
  unordered_map<int, vector<int>> m;
  for (auto i = 0; i < A.size(); ++i) m[A[i]].push_back(i);
  for (auto i = 0; i < A.size() - res; ++i)
    for (auto j = i + 1; j < A.size() - res; ++j) {
      auto seq = 2;
      for (auto step = A[j] - A[i], k = j; ; ++seq) {
        auto it = m.find(A[k] + step);
        if (it == end(m)) break;
        auto it1 = upper_bound(begin(it->second), end(it->second), k);
        if (it1 == end(it->second)) break;
        k = *it1;
      }
      res = max(res, seq);
    }
  return res;
}