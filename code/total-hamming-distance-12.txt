public class Solution {
    public int TotalHammingDistance(int[] nums) {
        var result = 0;
        var n = nums.Length;

        for (var i = 31; i >= 0; i--) {
            var count = 0;
            foreach (var num in nums) {
                if ((num >> i & 1) == 1) count++;
            }

            result += count * (n - count);
        }

        return result;
    }
}