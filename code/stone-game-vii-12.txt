class Solution {
public:
    int dp[1001][1001];
    int f(vector<int> &a,int i,int j,int sum)
    {
        if(i>j) return 0;
        if(dp[i][j]!=-1) return dp[i][j];
        return dp[i][j] = max(sum-a[i]-f(a,i+1,j,sum-a[i]) , sum-a[j]-f(a,i,j-1,sum-a[j]));
    }
    int stoneGameVII(vector<int>& a) {
        int n=a.size(),i,sum=0;
        for(i=0;i<n;i++) sum+=a[i];
        memset(dp,-1,sizeof(dp));
        return f(a,0,n-1,sum);
    }
};