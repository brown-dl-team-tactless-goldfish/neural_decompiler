public class Solution {
    public TreeNode RemoveLeafNodes(TreeNode root, int target) {
        TreeNode dummy = new TreeNode(Int32.MaxValue, root);
        
        DFS(dummy, target);
        
        return dummy.left;
    }
    
    private bool DFS(TreeNode node, int val)
    {
        if (node.left != null && DFS(node.left, val))
            node.left = null;
        
        if (node.right != null && DFS(node.right, val))
            node.right = null;
        
        if (node.left == null && node.right == null && node.val == val)
            return true;
        
        return false;
    }
}