class Solution {
public:
	vector<vector<int>> spiralMatrix(int m, int n, ListNode* head) {
		vector<vector<int>>res(m,vector<int>(n,-1));
		int row = 0, col = 0,drow = m-1,dcol = n-1,dir = 1,val = 1;
		while(row<=drow and col<=dcol and head){
			for(int i = col;i<=dcol and head;i++, head = head->next) res[row][i] = head->val;
			row++;
			if(!head) break;
			for(int i = row;i<=drow and head;i++,head = head->next) res[i][dcol] = head->val;
			dcol--;
			if(!head) break;
			for(int i = dcol;i>=col and head;i--,head = head->next) res[drow][i] = head->val;
			drow--;
			if(!head) break;
			for(int i = drow;i>=row and head;i--,head = head->next) res[i][col] = head->val;
			col++;
			if(!head) break;
		}
		return res;
	}
};