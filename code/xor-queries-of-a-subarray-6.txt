public int[] XorQueries(int[] arr, int[][] queries) {
	var max = 0; var min = arr.Length - 1;
	foreach (var q in queries) {
		if (q[0] < min) min = q[0];
		if (q[1] > max) max = q[1];
	}

	var xor = 0;
	var diff = max - min + 1;
	var xors = new int[diff];
	for (var i = 0; i < diff; i++) {
		xor ^= arr[i + min];
		xors[i] = xor;
	}

	var res = new int[queries.Length];
	for (var i = 0; i < res.Length; i++) {
		var q = queries[i];
		if (q[0] == min) {
			res[i] = xors[q[1] - min];
		} else {
			res[i] = xors[q[0] - min - 1] ^ xors[q[1] - min];
		}
	}

	return res;
}