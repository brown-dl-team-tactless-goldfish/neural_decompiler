// (a * b) % p = (a % p * b % p) % p
// if a == c + d
// (a * b) % p = ((c % p * d % p) % p * b % p) % p

// a ^ b % p = ((a % p)^b) % p

class Solution {
public:
    int superPow(int a, vector<int>& b) {
        if(b.empty())
            return 0;
        int bit = 1;
        long long res = 1;
        for (int i = 0; i < b.size(); ++i) {
            res = pow_1337(res, 10) * pow_1337(a, b[i]) % 1337;
        }
        return res;
    }
    int pow_1337(int x, int n){
        if(n == 0)
            return 1;
        if(n == 1)
            return (x % 1337);
        return (pow_1337(x % 1337, n/2) * pow_1337(x % 1337, n - n/2)) % 1337;
    }
};