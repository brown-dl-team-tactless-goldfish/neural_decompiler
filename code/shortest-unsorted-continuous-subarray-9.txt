    int start = -1, end = -1;
    int curMax = nums[0];
    int curMin = nums[numsSize - 1];
    
    for(int i = 0; i < numsSize; i++){
        int j = numsSize - 1 - i;
        
		//scanning forward; nums[i] should be larger than curMax which is the largest element in nums[0 : i - 1]
        if(nums[i] < curMax) end = i;
        else curMax = nums[i];
        
		//scanning backward; nums[j] should be lesser than curMin which is the smallest element in nums[j + 1: numsSize - 1]
        if(nums[j] > curMin) start = j;
        else curMin = nums[j];
    }    
    if(start == -1 && end == -1) return 0; 
    if(start != -1 && end == -1) return numsSize - start; 
    return end - start + 1;
}