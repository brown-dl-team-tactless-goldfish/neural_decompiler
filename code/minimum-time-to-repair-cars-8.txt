class Solution 
{
    public:
    bool check(vector<int>& ranks,int cars,long long p)
    {
        long long result=0,n=ranks.size();
        for(int i=0;i<n;i++) result+=sqrt(p/ranks[i]);
        return result>=cars;
    }
    long long repairCars(vector<int>& ranks, int cars) 
    {
        long long p1=1,p2=1000000000000000000;
        while(p1<p2)
        {
            long long middle=p1+(p2-p1)/2;
            if(check(ranks,cars,middle)) p2=middle;
            else p1=middle+1;
        }
        return p1;
    }
};