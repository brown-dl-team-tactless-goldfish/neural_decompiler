//To keep track if the string till now is valid we keep a counter c and do c+1 if '('
//and c-1 if ')' and if c<0 then its not valid 

class Solution {
private:
    int n,m;
    int dp[101][101][2002];
    int cal(int i,int j) //manhattan distance for prunning
    {
        return n-1-i+m-1-j;
    }
    int solve(int i,int j,vector<vector<char>>& v,int c)
    {
        if(c<0 || i>=n || j>=m ||c>cal(i,j)+1)
            return 0;
        if(dp[i][j][c]!=-1)
            return dp[i][j][c];
        if(i==n-1 && j==m-1)
        {
            if(v[i][j]=='(')
                ++c;
            else
                --c;
            return (c==0);
        }
        if(v[i][j]=='(')
            return dp[i][j][c]=solve(i+1,j,v,c+1)||solve(i,j+1,v,c+1);
        return dp[i][j][c]=solve(i+1,j,v,c-1)||solve(i,j+1,v,c-1);
    }
public:
    Solution(){memset(dp,-1,sizeof(dp));}
    bool hasValidPath(vector<vector<char>>& v) {
        n=v.size();
        m=v[0].size();
        return solve(0,0,v,0);
    }
};
//Like if it helps :)