    public long CountBadPairs(int[] nums)
    {
        int n = nums.Length;
        Dictionary<int, long> diff = new Dictionary<int, long>();
        long result = 0;
        for (int i = 0; i < n; i++)
        {
            int d = nums[i] - i;
            diff.TryAdd(d, 0);
            
            result += i - diff[d];
            diff[d]++;
        }
        return result;
    }