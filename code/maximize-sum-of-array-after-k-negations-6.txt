int cmpfunc(const void* a, const void* b) {
    return *(int*)a - *(int*)b;    
}

int largestSumAfterKNegations(int* A, int ASize, int K) {
    qsort(A, ASize, sizeof(int), cmpfunc);
    int ans = 0;
    for (int i = 0; i < ASize; i++) {
        if (A[i] < 0) {
            A[i] = -A[i];
            K--;
            if (K == 0)
                break;
        } else {
            break;
        }
    }
    
    qsort(A, ASize, sizeof(int), cmpfunc);
    for (int i = 0; i < ASize; i++) {
        if ((K > 0) && (K%2 == 1))
            A[0] = -A[0];
        ans += A[i];
    }
    
    return ans;
}