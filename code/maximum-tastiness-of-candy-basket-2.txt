class Solution {
public:
    int maximumTastiness(vector<int>& P, int k) {
        sort(begin(P), end(P));
        int n = P.size(), l = 0, h = P[n-1]-P[0];
        auto check = [&](int m) {
            int r = k;
            for(int i = 1, j = 0; i < n; i++) {
                if(P[i]-P[j] >= m) {
                    if(--r <= 1) return true;
                    j = i;
                }
            }
            return false;
        };

        while(l < h) {
            int m = l + (h-l+1)/2;
            if(check(m)) l = m;
            else h = m-1;
        }
        return l;
    }
};