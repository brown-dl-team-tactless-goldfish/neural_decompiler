class Solution {
public:
    bool queryString(string s, int N) {
        unordered_set<int> total;
        for(int i = 0; i < s.size(); i++) {
            int a = s[i] - '0';
            total.insert(a);
            for(int j = 1; j < 31 && i + j < s.size() && a < N; j++) {
                a = (a << 1) | (s[i + j] - '0');
                if (a <= N)
                    total.insert(a);
            }
        }
        return N == total.size() - total.count(0);
    }
};