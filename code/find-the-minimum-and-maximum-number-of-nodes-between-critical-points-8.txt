class Solution {
public:
    vector<int> nodesBetweenCriticalPoints(ListNode* head) {
        vector<int>all;
        
        ListNode *curr=head;
        if(head==NULL || head->next==NULL)
            return {-1,-1};
        int i=0;
        while(curr->next->next!=NULL)
        {
            if(curr->next->val>curr->val && curr->next->val>curr->next->next->val)
                all.push_back(i);
            
            if(curr->next->val<curr->val && curr->next->val<curr->next->next->val)
                all.push_back(i);
            
            curr=curr->next;
            i++;            
        }
        
        if(all.size()<2)
            return {-1,-1};
        
        int mina=INT_MAX;
        for(int i=0; i<all.size()-1; i++)
        {
            mina=min(mina,all[i+1]-all[i]);
        }
        
        return {mina,all[all.size()-1]-all[0]};
    }
};