class Solution {
public:
    int n,m;
    bool dfs(vector<vector<int>> &dp,vector<vector<char>>& nums,int i,int j,int sum){
        if(i<0||i>=n||j<0||j>=m) return 0;
        if(nums[i][j]=='(') sum++;
        else sum--;
        if(sum<0) return 0;
        int t = i*m+j;
        if(dp[t][sum]!=-1) return dp[t][sum];
        if(i==n-1 && j==m-1){
            if(sum==0) return 1;
            else return 0;
        }
        return dp[t][sum] = dfs(dp,nums,i+1,j,sum)||dfs(dp,nums,i,j+1,sum);
    }
    bool hasValidPath(vector<vector<char>>& nums) {
        n = nums.size(), m=nums[0].size();
        vector<vector<int>> dp(n*m,vector<int>(n+m,-1));
        return dfs(dp,nums,0,0,0);
    }
};