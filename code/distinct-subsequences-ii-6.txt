class Solution {
public:
    int distinctSubseqII(string s) {
        long long count = 1;
        vector<int> char_prev(256,0);
        for(auto c : s)
        {
            int prev = count;
            count = (count*2-char_prev[c]) %1000000007;
            if (count < 0) count += 1000000007;
            char_prev[c] = prev;
        }
        count--;  // subtract the case of empty string
        if (count < 0) count +=1000000007;
        return count;
    }
};