public class Solution {
    public IList<int> PancakeSort(int[] A) {
        var r = new List<int>();

            for (var i = A.Length; i >= 0; i--)
            {
                var ix = Array.IndexOf(A, i);

                if (ix != i - 1)
                {
                    if (ix != 0)
                    {
                        Swap(A, ix + 1);
                        r.Add(ix + 1);
                    }

                    Swap(A, i);

                    r.Add(i);
                }
            }

            return r;
    }
    
    private void Swap(int[] A, int k){
        for(var i = 0; i < k/2; i++){
            var a = A[i];
            A[i] = A[k - i - 1];
            A[k - i - 1] = a;
        }
    }
}