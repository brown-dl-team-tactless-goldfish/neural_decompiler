int cmpfunc(const void* a, const void* b){
    return *(int*)a - *(int*)b;
}

bool find(int* nums, int numsSize, int val){
    int left = 0; 
    int right = numsSize-1;
    int mid;
    while(left <= right){
        mid = (left + right)/2;
        if(nums[mid] == val)
            return true;
        
        if(val > nums[mid])
            left = mid +1;
        else
            right = mid -1;
    }
    
    return false;
}

int findPairs(int* nums, int numsSize, int k){
    int i, j;
    qsort(nums, numsSize, sizeof(int), cmpfunc);
    int ans = 0;
    
    for(i = 0; i < numsSize-1; i++){
        if(i > 0 && nums[i] == nums[i-1])
            continue;
        if(find(&nums[i+1], numsSize-1-i, k + nums[i]))
            ans++;        
    }  
    
    return ans;
}