int longestUnivaluePath(TreeNode* c, TreeNode* r = nullptr) {
    if (c == nullptr) return 0;
    if (r == nullptr) return max(longestUnivaluePath(c, c),
        max(longestUnivaluePath(c->left, nullptr), longestUnivaluePath(c->right, nullptr)));
    return c->val != r->val ? 0 : (c == r ? longestUnivaluePath(c->left, r) + longestUnivaluePath(c->right, r) :
            1 + max(longestUnivaluePath(c->left, r), longestUnivaluePath(c->right, r)));
}