public class Solution 
{
    public bool IsPossibleDivide(int[] nums, int k)
    {
        var dict = new Dictionary<int, int>();
        foreach(var num in nums)
        {
            if(!dict.ContainsKey(num)) dict[num] = 0;
            dict[num]++;
        }
        
        return IsPossibleDivide(dict, k);
    }
    
    public bool IsPossibleDivide(Dictionary<int, int> dict, int k)
    {
        var count = dict.Values.Sum();
        if(count % k != 0) return false;
        int min = dict.Keys.Min();
        for(int i = min; i < min + k; i++)
        {
            if(!dict.ContainsKey(i))
                return false;
            dict[i]--;
            if(dict[i] == 0)
                dict.Remove(i);
        }
        
        return count == k ? true : IsPossibleDivide(dict, k);
    }
}