/**
 * Definition for a binary tree node.
 * struct TreeNode {
 *     int val;
 *     struct TreeNode *left;
 *     struct TreeNode *right;
 * };
 */

 #define ABS(a)   ((a)< 0?-(a):(a))
 #define MIN(a,b) ((a)<(b)?(a):(b))
 #define MAX(a,b) ((a)>(b)?(a):(b))

int minMax(struct TreeNode* node, int min, int max){
    if(node == NULL) return ABS(min-max);

    min = MIN(node->val, min);
    max = MAX(node->val, max);

    int minMaxL = minMax(node->left, min, max);
    int minMaxR = minMax(node->right, min, max);

    return MAX(minMaxL, minMaxR);
}

int maxAncestorDiff(struct TreeNode* root){
    if(root == NULL) return 0;

    return minMax(root, root->val, root->val);
}