class Solution {
public:
    int orderOfLargestPlusSign(int n, vector<vector<int>>& mines) {
        vector<set<int>> rows(n, {-1, n});
        vector<set<int>> cols(n, {-1, n});
        
        for(auto &p : mines) {
            rows[p[1]].insert(p[0]);
            cols[p[0]].insert(p[1]);
        }
        
        int max_p = 0;
        for(int r = 0; r < n; ++r) {
            for(int c = 0; c < n; ++c) {
                auto hl = rows[r].upper_bound(c);
                auto hr = hl--;
                int h = min(c - *hl, *hr - c);
                
                auto vl = cols[c].upper_bound(r);
                auto vr = vl--;
                int v = min(r - *vl, *vr - r);
                
                max_p = max(max_p, min(h, v));
            }
        }
        
        return max_p;
    }
};