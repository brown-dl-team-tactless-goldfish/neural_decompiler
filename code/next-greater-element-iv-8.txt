class Solution {
public:
    vector<int> secondGreaterElement(vector<int>& nums) {
        int n = nums.size();
        vector<int> ng(n, -1);
        stack<int> s;
        for(int i=n-1; i>=0; i--) {
            while(not s.empty() and nums[s.top()] <= nums[i]) s.pop();
            if(not s.empty()) ng[i] = s.top();
            s.push(i);
        }
        vector<int> a(n, -1);
        for(int i=n-1; i>=0; i--) {
            if(ng[i] == -1) continue;
            int j= ng[i] + 1;
            while(j != -1 and j < n and nums[j] <= nums[i]) {
                j = ng[j];
            }
            if(j == -1 or j == n) continue;
            else a[i] = nums[j];
        }
        return a;
    }
};