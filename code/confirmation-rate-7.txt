with confirmation_rate as (
    select
        user_id,
        sum(case when action = 'confirmed' then 1 else 0 end) / count(*) as rate
    from Confirmations
    group by user_id
)

select
    s.user_id,
    round(ifnull(c.rate, 0), 2) as confirmation_rate
from Signups s
left join confirmation_rate c 
on s.user_id = c.user_id