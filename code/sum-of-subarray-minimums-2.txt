int sumSubarrayMins(int* arr, int arrSize){
    int i, n = arrSize, top = -1;
    long res = 0;

    int *stk = (int*)malloc(sizeof(int) * n);

    for (i = 0; i <= n; i++) {
        while ((top != -1) && (i == n || arr[i] < arr[stk[top]])) {
            int j = stk[top];
            --top;
            int k = (top == -1) ? -1 : stk[top];
            res += (long) arr[j] * (i - j) * (j - k);
        }

        stk[++top] = i;
    }
    
    return (int)(res % (long)(1000000007));
}