class Solution {
public:
    long long findScore(vector<int>& nums) {
        int n = nums.size() ;
        vector<bool>used(n) ;
        map<int, vector<int>>Map ; //{val, idx}
        for(int i = 0; i < n; i++){
            Map[nums[i]].push_back(i) ;
        }
        long long ret = 0 ;
        for(auto& m : Map){
            int val = m.first ;
            vector<int>&vec = m.second ;
            for(int i = 0; i < vec.size(); i++){
                int nxt = vec[i] ;
                if(used[nxt] == false){                    
                    used[nxt] = true ;
                    ret = ret + val ;
                    if(nxt > 0)
                        used[nxt-1] = true ;
                    if(nxt < n-1)
                        used[nxt+1] = true ;
                }               
            }
        }
        return ret ;
    }
};