void reverse(char* s, int start, int end) {
    while (start < end) {
        char tmp = s[start];
        s[start] = s[end];
        s[end] = tmp;
        start++;
        end--;
    }
}

char* reverseParentheses(char* s) {
    int len = strlen(s), idx = 0, top = 0;
    char* res = (char*) malloc((len + 1) * sizeof(char));
    int* arr = (int*) malloc(len * sizeof(int));
    for (int i = 0; i < len; i++) {
        if (s[i] == '(') {
            arr[top++] = i;
            continue;
        }
        if (s[i] == ')') reverse(s, arr[--top] + 1, i - 1); 
    }
    for (int i = 0; i < len; i++) {
        if (s[i] == '(' || s[i] == ')') continue;
        res[idx++] = s[i];
    }
    res[idx] = '\0';
    free(arr);
    return res;
}