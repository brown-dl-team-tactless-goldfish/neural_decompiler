int **imageSmoother(int **img, int matrixSize, int *matrixColSize, int *returnSize, int **returnColumnSizes) {
 
 int x = matrixSize, y = *matrixColSize;
  int **res = malloc(sizeof(int*) * x);
  *returnColumnSizes = malloc(sizeof(int) * x);
  *returnSize = x;
  for (int i = 0; i < x; i++) {
    res[i] = malloc(sizeof(int) * y);
    (*returnColumnSizes)[i] = y;
  }
  
  for (int i = 0; i < x; i++) {
    for (int j = 0; j < y; j++) {
      int total = (*(img + i))[j];
      int ctr = 1;

      if (i != x-1){
        total += (*(img + i+1))[j]; ctr++; // bawah
        if (j != y-1) {total += (*(img + i+1))[j+1]; ctr++;} // kanan bawah
        if (j >= 1) {total += (*(img + i+1))[j-1]; ctr++;} // kiri bawah
      }

      if (i >= 1){
        {total += (*(img + i-1))[j]; ctr++;} // atas
        if (j >= 1) {total += (*(img + i-1))[j-1]; ctr++;} // kiri atas
        if (j != y-1) {total += (*(img + i-1))[j+1]; ctr++;} // kanan atas
      }

      if (j >= 1){
        total += (*(img + i))[j-1]; ctr++; // kiri
      }

      if (j != y-1){ 
        total += (*(img + i))[j+1]; ctr++; // kanan
      }

      (*(res + i))[j] = (total / ctr);
    }
  }
  return res;
}