class Solution {
public:
    int lastRemaining(int n) {
        int d = 1;
        int k = 1;
        int h = 1;
        while(n>1){
            if(n%2==0){
                h = h+k*(n-1)*d ; 
            }
            
            else{
                h = h+k*(n-2)*d;
            }
          n/=2;
          d*=2;
          k = k*(-1);
        } 
    return h;
    }
};