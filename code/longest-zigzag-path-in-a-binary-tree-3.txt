int dfs(TreeNode* n, bool left, int depth) {
    return n == nullptr ? depth : 
        max(dfs(left ? n->left : n->right, !left, depth + 1),
            dfs(left ? n->right : n->left, left, 0));
}
int longestZigZag(TreeNode* root) {
    return max(dfs(root, true, -1), dfs(root, false, -1));
}