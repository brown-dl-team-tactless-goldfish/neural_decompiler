
#define min(a,b) (a < b ? a : b)
int longestPalindrome(char ** words, int wordsSize){

    unsigned hash[255][255] = {0};
    
    for (int i = 0; i < wordsSize; i++)
        hash[words[i][0]][words[i][1]] += 1;
    
    signed length = 0;
    unsigned numodd = 0;
    for (int i = 0; i < wordsSize; i++)
    {
        
        if (words[i][0] == words[i][1])
        {
            unsigned numocc = hash[words[i][0]][words[i][1]];
            length += (numocc*2);
            hash[words[i][0]][words[i][1]] = 0;
                if (numodd == 1 && numocc %2 != 0)
                    length -= 2;
                else if (numocc %2 != 0) numodd++;
        }
        else
        {
            if (hash[words[i][1]][words[i][0]])
            {
                unsigned numocc = min (hash[words[i][0]][words[i][1]], hash[words[i][1]][words[i][0]]);
                length += numocc*4;
            }
            
            hash[words[i][1]][words[i][0]] = 0;
            hash[words[i][0]][words[i][1]] = 0;
            
        }
    }
        
            
    return length;
}
    
    