public class Solution {
    public int SubarrayLCM(int[] nums, int k) {
        int res = 0, n = nums.Length;
        
        for(int i = 0; i < n; i++)
        {
            int c = 1;
            for(int j = i; j < n && c <= k; j++)
            {
                c = Task(c, nums[j]);
                res += (c == k) ? 1 : 0;
            }
        }
        
        return res;
    }
    
    private int GCD(int a, int b)
        => b == 0 ? a : GCD(b, a % b);
    
    private int Task(int a, int b)
        => (a * b) / (GCD(a, b));
}