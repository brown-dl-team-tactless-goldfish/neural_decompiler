class AuthenticationManager {
public:
    map<string,int>M;
    multiset<int>S;
    int T;
    
    AuthenticationManager(int timeToLive) {
        T=timeToLive;        
    }
    
    void generate(string tokenId, int currentTime) {
        M[tokenId]=currentTime+T;
        S.insert(M[tokenId]);
    }
    
    void renew(string tokenId, int currentTime) {
        if(M.find(tokenId)==M.end())     
            return ;
        if(M[tokenId]<=currentTime)
            return ;
        S.erase(S.find(M[tokenId]));
        M[tokenId]=currentTime+T;
        S.insert(M[tokenId]);
    }
    
    int countUnexpiredTokens(int currentTime) {
        int ans=0;
        for(int v:S){
            if(v>currentTime)
                ans++;
        }
        return ans;
    }
};