class Solution {
public:
    vector<int> maxScoreIndices(vector<int>& nums) {
        int size = nums.size(), maximum = INT_MIN;
        int zeroes = 0, ones = 0;
        
        vector<vector<int>> result(size + 1);
        
        vector<int> zeroesSoFar(size, 0), onesSoFar(size, 0);
        
        if(nums[0]) onesSoFar[0] = ++ones;
        else zeroesSoFar[0] = ++zeroes;
        
        for(int i = 1; i < size; i++){
            if(nums[i]) ones++;
            else if(!nums[i]) zeroes++;
            
            zeroesSoFar[i] = zeroes; onesSoFar[i] = ones;
            
        }
        
        maximum = onesSoFar[size - 1];
        result[maximum].push_back({0});
        
        for(int i = 1; i <= size; i++){
            int rhs = zeroesSoFar[i - 1];
            int lhs = (onesSoFar[size - 1] - onesSoFar[i - 1]);
            int score = rhs + lhs;
            
            if(maximum <= score){
                maximum = score;
                result[score].push_back(i);
            }
        }
        
        return result[maximum];
    }
};