class Solution {
public:
    string conv(int i) {
        string res;
        while(i > 0) {
            res.push_back(i&1?'1':'0');
            //cout << "res:" << res << endl;
            i >>= 1;
        }
        reverse(res.begin(), res.end());
        return res;
    }
    int concatenatedBinary(int n) {
        int K = 1000000007;
        long result=0;
        for(int i=1; i <= n; ++i){
            string binint = conv(i);
            //cout << "i:" << i << ", binint:" << binint << endl;
            for(char c: binint) {
                result = ( result*2 + (c-'0')) % K;
            }
        }
        return result;
    }
};