class Solution {
public:
    long long interchangeableRectangles(vector<vector<int>>& rectangles) {
        
        int sz = rectangles.size();
        
        vector<double> temp(sz);
        
        for (int i=0; i<sz; i++) {
            temp[i] = (double) rectangles[i][0] / (double) rectangles[i][1];
        }
        
        sort(temp.begin(), temp.end());
        
        unordered_map<double,int> lastIndex;
        
        for (int i=0; i<sz; i++) {
            lastIndex[temp[i]] = i;
        }
        
        long long c = 0;
        
        for (int i=0; i<sz; i++) {
            int li = lastIndex[temp[i]];
            if (li == i) continue;
            
            c += li - i;
        }
        
        return c;
    }
};