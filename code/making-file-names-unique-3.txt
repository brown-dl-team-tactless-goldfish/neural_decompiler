public class Solution {
    public string[] GetFolderNames(string[] names) {
        
        List<string> res = new List<string>();
        if(names == null || names.Length == 0)
            return res.ToArray();
        
        Dictionary<string,int> dic = new Dictionary<string,int>();
        foreach(string str in names)
        {           
            if(!dic.ContainsKey(str))
            {
                dic.Add(str, 0);
                res.Add(str);
            }
            else
            {
                int suffix  = dic[str] + 1;
                
                // keep increasing suffix if the name has been used
                while(dic.ContainsKey(str + "(" + suffix + ")"))
                   suffix++;
                
                // update the smallest positive integer for folder name 'str' 
                // to reduce the while loop operations when the next 'str' occurs 
                dic[str] = suffix;
                
                // add the new folder name to the dictionary
                string newName = str + "(" + suffix  + ")"; 
                res.Add(newName);
                dic.Add(newName, 0);
            }
        }
        
        return res.ToArray();
    }
}