class Solution {
public:
  long long appealSum(string s) {
    
    using ll = long long;  
    int n = s.size();

    vector<vector<int>> a(26);
    for (int i=0; i<n; i++) {
      int x = s[i] - 'a';
      a[x].push_back(i);
    }
    ll ans = 0;
    
    for (int i=0; i<26; i++) {
      if (a[i].empty()) continue;
      a[i].push_back(n);
      ans += n*(n+1) / 2;
      for (int j=0; j<a[i].size(); j++) {
        ll cnt;
        if (j==0) cnt = a[i][j];
        else cnt = a[i][j] - a[i][j-1] - 1;
        ans -= cnt*(cnt+1)/2;
      }
    }
    return ans;
  }
};