class Solution {
public:
    vector<int> platesBetweenCandles(string s, vector<vector<int>>& queries) {
        int n = s.size();
        vector<int> ans(queries.size(), 0), pxsm, left(n,0), right(n,0);
        int sidx, eidx, prxsm = 0;
        for(int j = 0; j < n; j++)
        {
            if(s[j] == '*')
                prxsm += 1;
            pxsm.push_back(prxsm);
        }
        for(int i = 1; i < n; i++)
        {
            if(s[i] == '|')
                left[i] = i;
            else
                left[i] = left[i-1];
        }
        if(s[n-1] == '|')
            right[n-1] = n-1;
        for(int i = n-2; i >= 0; i--)
        {
            if(s[i] == '|')
                right[i] = i;
            else
                right[i] = right[i+1];
        }
        for(int i = 0; i < queries.size(); i++)
        {
            sidx = queries[i][0];
            eidx = queries[i][1];
            if(left[sidx] != left[eidx] || right[sidx] != right[eidx])
            {
                ans[i] = pxsm[left[eidx]] - pxsm[right[sidx]];
            }
        }
        return ans;
    }
}; 