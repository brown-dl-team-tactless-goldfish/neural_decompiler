

char * validIPAddress(char * IP){


if(IP[0]=='\0'||strlen(IP)<7||strlen(IP)>39)
{
char *result=(char*)malloc(8*sizeof(char));    
strcpy(result,"Neither");
return result;
}

    
int i,c1=0,c2=0,k=0,value=0,c=0,d=0;
d=strlen(IP);
    
char temp[1000000];
    
for(i=0;i<1000000;i++)
temp[i]='\0';
 

for(i=0;i<d;i++)
{
if((IP[i]=='.'&&IP[i+1]=='.')||(IP[i]==':'&&IP[i+1]==':'))
{
c1=0;
break;
}
else if(IP[i]=='.')
++c1;
else if(IP[i]==':')
++c2;
}
 
    
if(c1==3)
{
c1=0;
for(i=0;;i++)
{
if(IP[i]=='.'||IP[i]=='\0')
{
temp[k]='\0';

    
    

    
if(temp[0]=='\0'||temp[0]=='0'&&temp[1]!='\0')
{
c1=0;
break;
}

if(temp[0]!='\0')
value=atoi(temp);
    
if(value>=0&&value<=255)
++c1;
k=0;
if(IP[i]=='\0')
break;
}
    
else if(IP[i]!='\0'&&IP[i]>='0'&&IP[i]<='9')
{
temp[k]=IP[i];
++k;
}
else
{
c1=0;
break;
}
}

if(c1==4)
strcpy(IP,"IPv4");
else
strcpy(IP,"Neither");

} 
    

else if(c2==7)
{
c1=0;
for(i=0;;i++)
{
if(IP[i]==':'||IP[i]=='\0')
{

if(c1<=4&&c1>=1)
++c;
else
break;
c1=0;
if(IP[i]=='\0')
break;
}

else if(IP[i]>='0'&&IP[i]<='9'||IP[i]>='A'&&IP[i]<='F'||IP[i]>='a'&&IP[i]<='f')
++c1;
else if(IP[i]!=':'&&IP[i]!='\0')
{
c=0;
break;
}
}

if(c==8)
strcpy(IP,"IPv6");
else
strcpy(IP,"Neither");
}
    
else
{
char *result=(char*)malloc(8*sizeof(char));    
strcpy(result,"Neither");
return result;
}
    

return IP;    
}
