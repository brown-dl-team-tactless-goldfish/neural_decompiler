class Solution {
public:
    int threeSumMulti(vector<int>& arr, int target) {
        unordered_map<int,long> m;
        
        for(int i=0;i<arr.size();i++)
        {
            m[arr[i]]++;
        }
        
        long res = 0;
        for(auto it: m)
        {
            for(auto it2: m)
            {
                int a = it.first, b = it2.first, c = target-a-b;
                
                if(m.find(c) != m.end())
                {
                    if(a == b && a == c)
                        res += (m[a] * (m[a]-1) * (m[a]-2))/6;
                    else if(a == b && a != c)
                        res += (m[a] * (m[a]-1))/2 * m[c];
                    else if(a < b && b < c)
                        res += (m[a] * m[b] * m[c]);
                }
                
                res = res % (long)(1e9+7);
            }
        }
        
        return (int)(res % (long)(1e9+7));
    }
};