class Solution {
public:
    bool checkPalindromeFormation(const string& a, const string& b) {
        return check(a, b) || check(b, a);
    }
    
    static bool check(const string& a, const string& b) {
        int size{(int)a.size()}, len{0};
        while(a[len] == b[size-len-1]) ++len;
        return checkPalin(a, b, len) || checkPalin(b, a, len);
    }
    
    static bool checkPalin(const string& a, const string& b, int len) {
        int size{(int)a.size()}, i{((size&~1)>>1)-1}, j{(size+1)>>1};
        for(; i >= len; --i, ++j)
            if(a[i] != a[j]) return false;
        
        return true;
    }
};