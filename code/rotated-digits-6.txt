#include <stdio.h>
#define length 5

int rotatedDigits(int N) {
	int nFlag[10] = {0, 0, 1, -1, -1, 1, 1, -1, 0, 1};
	int dMap[10] = {1, 2, 2, 2, 2, 2, 2, 2, 3, 3};
	int zMap[10] = {0, 0, 1, 1, 1, 2, 3, 3, 3, 4};

	int i, base = 3, dCount[length] = {0}, zCount[length] = {0};
	dCount[1] = 4;
	zCount[1] = 7;
	for(i = 2; i < length; i++) {
		dCount[i] = (dCount[i - 1] * 7) + (4 * base);
		base *= 3;
		zCount[i] = (zCount[i - 1] * 7);
	}

	int point = 0, digit[length] = {0}; 
	while(N > 0) {
		digit[point] = N % 10;
		point++;
		N /= 10;
	}

	int headNum, flag = 0, count = 0;
	for(i = point - 1; i >= 1; i--) {
		headNum = digit[i];
		if(headNum == 0) {
			continue;
		}

		if (flag == -1) {
			break;
		} else if (flag == 0) {
			count += ((dCount[i] * dMap[headNum - 1]) + (zCount[i] * zMap[headNum - 1])); 
		} else if (flag == 1) {
			count += ((zMap[headNum - 1] + dMap[headNum - 1]) * zCount[i]); 
		}
	
		if (nFlag[headNum] == 0) {
			flag = (nFlag[headNum] + flag);
		} else {
			flag = nFlag[headNum];
		}
	}
	if (flag == 0) {
		count += zMap[digit[0]]; 
	} else if (flag == 1) {
		count += (zMap[digit[0]] + dMap[digit[0]]); 
	}
	
	return count;
}