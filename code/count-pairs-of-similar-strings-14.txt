public class Solution {
    public int SimilarPairs(string[] words) 
        => words
            .GroupBy(GetHashByArray)
            .Select(_ => _.Count())
            .Where(n => n > 1)
            .Sum(n => n*(n-1)/2);
    

    public int GetHashByArray(string s)
    {
        bool [] arr = new bool[26];

        foreach (var c in s.ToCharArray()) arr[c - 'a'] = true;

        var hash = 0;

        for (var shift = 0; shift < 26; shift++)
        {
            if (arr[shift]) hash |= 1 << shift;
        }

        return hash;
    }
}