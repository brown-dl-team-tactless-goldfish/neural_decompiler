class Solution {
public:
    vector<int> prevPermOpt1(vector<int>& arr) {
        //traverse from last to first element till you are getting a descending order
        //i.e.,  1 4 3 2 1  we traverse from last to 3 element
        
        int len=arr.size();
        
        if(len==1)
            return arr;
        int j=len-2;
        vector<int> res;
        //we continue till we find descending  order from last
        while(j>=0 && arr[j]<=arr[j+1])
        {
                j--;
        }
        //arr is the least itself
        if(j<0)
            return arr;
        //now find the greatest element which is lesser than the arr[j]
        int i=len-1;
        while(i>0 && arr[i]>=arr[j])
        {
            i--;
        }
        while(i>0 && arr[i]==arr[i-1])
        {
            i--;
        }
        swap(arr[j],arr[i]);
        return arr;
    }
};