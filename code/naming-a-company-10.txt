class Solution {
public:
    string oklist(string nglist){
        int a[30] = {0};
        string ret = "";
        for(int j=0;j<nglist.size();j++){
            a[nglist[j] - 'a']++;
        }
        for(int i = 'a'; i<= 'z'; i++){
            if(a[i-'a'] == 0) ret += i;
        }
        return ret;
    }
    long long distinctNames(vector<string>& ideas) {
        map<string,string> mp;
        // string,nglist(first letters)
        for(auto &idea:ideas){
            string str = idea.substr(1);
            string s = "";
            s += idea[0];
            if(mp.find(str) == mp.end()){
                mp[str] = s;
            }
            else mp[str] = mp[str] + s;
        }
        int ok[30][30] = {0};
        // first->taking is ok second->giving char
        for(auto it = mp.begin(); it!=mp.end(); it++){
            string str = it->first;
            string ngs = it->second;
            string oks = oklist(ngs);
            for(char c:oks){
                int ic = c - 'a';
                for(char c2:ngs){
                    int ic2 = c2 - 'a';
                    ok[ic][ic2]++;
                }
            }
        }
        long long ans = 0;
        // first -> giving first letter second-> taking ok char
        for(auto it = mp.begin(); it!=mp.end(); it++){
            string str = it->first;
            string ngs = it->second;
            string oks = oklist(ngs);
            for(char c:ngs){
                for(char c2:oks){
                    int ic = c - 'a';
                    int ic2 = c2 - 'a';
                    ans += ok[ic][ic2];
                }
            }
        }
        return ans;
    }
};