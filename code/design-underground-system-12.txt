class UndergroundSystem {
    unordered_map<int, pair<string, int>>hm;     /* customer, station in and in time */
    unordered_map<string, pair<double, int>>mp;  /* Station out, current average, and trip number */
public:
    UndergroundSystem() {
    }
    
    void checkIn(int id, string stationName, int t) {
        hm[id] = make_pair(stationName, t);
    }
    
    void checkOut(int id, string stationName, int t) {
        mp[hm[id].first+stationName].first = (mp[hm[id].first+stationName].first * mp[hm[id].first+stationName].second
                                              + (t - hm[id].second))/ (mp[hm[id].first+stationName].second +1);
        mp[hm[id].first+stationName].second++;
    }
    
    double getAverageTime(string startStation, string endStation) {
        string str = startStation+endStation;
        return mp[str].first;
    }
};