public class Solution 
{
    public int LongestSubsequence(int[] arr, int d) 
    {
        Dictionary<int, int> len = new Dictionary<int, int>();
        for (int i = 0; i < arr.Length; i++)
            len[arr[i]] = len.ContainsKey(arr[i] - d) ? 1 + len[arr[i] - d] : 1;
        return len.Values.Max();
    }
}