class Solution {
public:
    int findLengthOfShortestSubarray(vector<int>& arr) {
       vector<int> right;
        vector<int> left;
        int sz=arr.size();
        int prev=0;
        int l=0;
        int ans=0;
        while(l<sz and arr[l]>=prev) {left.push_back(arr[l]);prev=arr[l];l++;}
        l=sz-1;
        prev=INT_MAX;
        while(l>=0 and arr[l]<=prev) {right.push_back(arr[l]);prev=arr[l];l--;}
        if(left.size()==sz) return 0;
        int lsz=left.size(),rsz=right.size();
        ans=max(lsz,rsz);
        
        for(int i=0;i<right.size();i++){
            int pos=upper_bound(left.begin(),left.end(),right[i])-left.begin();
            
            ans=max(ans,pos+i+1);
        }
        return sz-ans;
    }
};