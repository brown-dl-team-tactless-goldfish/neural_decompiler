class Solution {
public:
    int maxOperations(vector<int>& nums, int k) {
        unordered_map<int, int> mp;
        
        for(auto x:nums)
            mp[x]++;
        
        int c = 0;
        
        for(int i = 0; i < nums.size(); i++){
            int x = nums[i];
            
            if(x <= k){
                int y = k-x;
                
                if(mp.find(y) != mp.end()){
                    bool f1 = false, f2 = false;
                    if(mp[x] > 0){
                        f1 = true;
                        mp[x]--;
                    }
                    if(mp[y] > 0){
                        f2 = true;
                        mp[y]--;
                    }
                    if(f1 && f2)    c++;
                }
                
            }           
        }
        return c;
    }
};