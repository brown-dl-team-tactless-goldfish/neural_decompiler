class Solution {
protected:
    
    void traverse(TreeNode* root, bool isLeft, int length, int& maxLength) {
        if (root == nullptr) {
            return;
        }
        if (length > maxLength) {
            maxLength = length;
        }
        traverse(root->left, true, isLeft ? 1 : length + 1, maxLength);
        traverse(root->right, false, isLeft ? length + 1 : 1, maxLength);
    }
    
public:
    int longestZigZag(TreeNode* root) {
        int maxLength = 0, maxLength2 = 0;
        traverse(root, true, 0, maxLength);
        return max(maxLength, maxLength2);
    }
};