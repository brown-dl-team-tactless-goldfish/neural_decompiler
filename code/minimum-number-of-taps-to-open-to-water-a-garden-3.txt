public class Solution 
{
    public int MinTaps(int n, int[] ranges) 
    {
        var dp = Enumerable.Repeat(100000, n + 1).ToArray();
        dp[0] = 0;
        for (int i = 0; i < n + 1; i++)
        {
            int left = Math.Max(i - ranges[i], 0), right = Math.Min(i + ranges[i], n);
            for (int j = left; j <= right; j++)
                dp[j] = Math.Min(dp[j], dp[left] + 1);
        }
        
        return dp[n]  < 100000 ? dp[n] : -1;
    }
}