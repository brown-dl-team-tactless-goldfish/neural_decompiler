public class Solution {
    public bool IsBalanced(TreeNode root) {
        if(CheckBalance(root) == -1) return false;
        return true;
    }
    private int CheckBalance(TreeNode root)
    {
        if(root == null) return 1;
        
        int left = CheckBalance(root.left);
        if(left == -1) return -1;
        
        int right = CheckBalance(root.right);
        if(right == -1) return -1;
        
        int diff = Math.Abs(left - right);
        if(diff > 1) return -1;
        
        return Math.Max(left, right) +1;
    }
}