class Solution {
public:
    bool isSubPath(ListNode* head, TreeNode* root) {
        return go(head, root);
    }
private:
    bool go(ListNode* head, TreeNode* root) {
        if (root == nullptr)
            return false;
        if (step(head, root))
            return true;
        return go(head, root->left) || go(head, root->right);
    }
    bool step(ListNode* head, TreeNode* root) {
        if (head == nullptr)
            return true;
        if (root == nullptr || head->val != root->val)
            return false;
        return step(head->next, root->left) || step(head->next, root->right);
    }
};