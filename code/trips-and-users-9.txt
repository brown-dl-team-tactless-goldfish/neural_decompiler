select Request_at as day,
       round((sum(case when t.Status != 'completed' then 1 else 0 end)
       /
       count(*)),2) as 'Cancellation Rate'
from trips t
join users d on t.Driver_Id = d.users_id and d.Role = 'driver' and d.banned = 'No'
join users c on t.client_id = c.users_id and c.Role = 'client' and c.banned = 'No'
where Request_at between '2013-10-01' and '2013-10-03'
group by 1