public class Solution 
{
    public long FindScore(int[] nums) 
    {
        int n = nums.Length;
        int[][] numIndex = new int[n][];
        for (int i = 0; i < n; i++)
        {
            numIndex[i] = new int[] { nums[i], i };
        }
        Array.Sort(numIndex, (a, b) => a[0] == b[0] ? a[1].CompareTo(b[1]) : a[0].CompareTo(b[0]));
        HashSet<int> visitedIndex = new HashSet<int>();

        long result = 0;
        for (int i = 0; i < n; i++)
        {
            if (!visitedIndex.Contains(numIndex[i][1]))
            {
                result += numIndex[i][0];
                visitedIndex.Add(numIndex[i][1] - 1);
                visitedIndex.Add(numIndex[i][1] + 1);
            }
        }
        return result;
    }
}