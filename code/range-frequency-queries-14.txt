class RangeFreqQuery {
    vector<pair<int,int>> v;
public:
    RangeFreqQuery(vector<int>& arr) {
        for(int i=0; i<arr.size(); i++) 
           v.push_back(make_pair(arr[i],i));
        sort(v.begin(), v.end());
    }
    
    int query(int left, int right, int value) {
        auto low=lower_bound (v.begin(), v.end(), make_pair(value,left));
        auto up=upper_bound(v.begin(), v.end(), make_pair(value,right));
        if (up != v.end() && (up->second == left && up->first == value))
            return up - low + 1;
        else
            return up - low;
    }
};