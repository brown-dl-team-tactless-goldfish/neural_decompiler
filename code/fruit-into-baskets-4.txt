int totalFruit(int* fruits, int fruitsSize){
    
    int hash[100001]={0};
    int l=0,r=0;
    int bucket = 2;
    int i,k;
    int idx;
    int max = 1;
    for (i=0; i < fruitsSize; i++)
    {
        idx = fruits[i];
        if (hash[idx] == 0)
        {
            if (bucket)
            {
                hash[idx] = 1;
                r++;
                bucket--;
            }
            else
            {
                if ((r-l) > max)
                    max = r-l;
                
                memset(hash,0,sizeof(hash));
                l = i-1;
                r = i+1;
                k = fruits[l];
                
                while(k == fruits[l-1])
                    l--;
                
                hash[fruits[l]] = 1;
                hash[fruits[i]] = 1;
            }
        }
        else
        {
            r++;
        }

    }
    if ((r-l) > max)
        max = r-l;
        
    return max;

}