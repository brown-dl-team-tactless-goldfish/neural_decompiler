#define min(a, b) a<b?a:b

int minFlipsMonoIncr(char * s){
    int len = strlen(s);
    static int left[100000]={0};
    static int rigt[100000]={0};
    int M=len;  

	//count flip numbers from left and right
    for(int i=0;i<len;i++){ 
        if(i==0){ 
            left[i] = (s[i]-'0');
            rigt[len-1-i] = ('1'-s[len-1-i]); 
        } 
        else{
            left[i] = left[i-1] + (s[i]-'0');
            rigt[len-1-i] = rigt[len-i] + ('1'-s[len-1-i]); 
        }
    }
	
    //all the digits are same =>don't need to flip
    if(rigt[0]==len) return 0;
    if(left[len-1]==len) return 0;
    
    //merge left and right flip counts and save the smaller count
    for(int i=0;i<len-1;i++){
        M= min(M, left[i]+rigt[i+1]);
    }

	//the minimum happens when flipping all digits to 0
	//e.g. 00011000 => 00000000
    if(left[len-1]!=0)
        M=min(M, left[len-1]); 

	//the minimum happens when flipping all digits to 1
	if(rigt[0]!=0)
        M=min(M, rigt[0]);
    
    return M;

}