class Solution {
public:
    int maxChunksToSorted(vector<int>& arr) {
        deque<int> monoq;
        for (int i = 0; i < arr.size(); i++) {
            while (!monoq.empty() && arr[monoq.back()] >= arr[i]) {
                monoq.pop_back();
            }
            monoq.push_back(i);
        }
        int maxVal = arr[0];
        int res = 1;
        for (int i = 0; i < arr.size(); i++) {
            if (i > 0 && maxVal <= arr[monoq.front()]) {
                res ++;
            }
            maxVal = max(maxVal, arr[i]);
            if (i == monoq.front()) {
                monoq.pop_front();
            }
        }
        return res;
    }
};