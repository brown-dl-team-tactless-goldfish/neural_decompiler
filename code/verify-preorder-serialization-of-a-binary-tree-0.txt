bool check(char* preorder, int n, int* pos){
    if( (*pos) > n )
        return false;
    if( preorder[*pos] == '#'){
        *pos = *pos + 2;
        return  true;
    }
    while(preorder[*pos] != ',' && (*pos) < n){
        (*pos)++;
    }
    *pos = *pos + 1;
    
    return check(preorder, n, pos) && check(preorder, n, pos);    
    
}
bool isValidSerialization(char * preorder){
    int n = strlen(preorder);
    int pos = 0;
    bool ans = false;
    ans =  check(preorder, n, &pos);
    if(pos < n)
        return false;
    return ans;
}