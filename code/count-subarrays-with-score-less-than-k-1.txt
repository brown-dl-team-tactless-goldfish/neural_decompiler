long long countSubarrays(int* nums, int numsSize, long long k){
    long long j = nums[0];
    long long count = 1;
    int st = 0;
    int en = 1;
    long long ans = 0; 
    while (en < numsSize){
        if (j*count < k){
            ans += count;
            j += nums[en];
            en++;
            count++;
            while (j*count < k && en < numsSize){
                ans += count;
                j += nums[en];
                en++;
                count++;
            }
        } else {
            j -= nums[st];
            st++;
            count--;
            while (j*count >= k){
                j -= nums[st];
                st++;
                count--;
            }
        }
    }
    if (j*count >= k){
        while (j*count >= k){
            j -= nums[st];
            st++;
            count--;
        }
        ans += count;
    } else if (j*count < k){
        ans += count;
    }
    return ans;
}