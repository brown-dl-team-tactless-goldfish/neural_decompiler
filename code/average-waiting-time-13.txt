class Solution {
public:
    double averageWaitingTime(vector<vector<int>>& customers) {
        int64_t totalDiff{0};
        int time{0}, wait{0};
        for(const auto &c: customers) {
            wait = std::max(0, time + wait - c[0]) + c[1];
            time = c[0];
            totalDiff += wait;
        }
        return (double)totalDiff/customers.size();
    }
};