
bool isBalanced(struct TreeNode* root){
    int d = 1;
    return isBalanceSub(root, &d);
    
}

bool isBalanceSub(struct TreeNode* root, int *d) {
    if(root == NULL) {
        *d -= 1;
        return true;
    }   
    int leftdep = 1;
    int rightdep = 1;
    bool leftBalance = isBalanceSub(root->left, &leftdep);
    bool rightBalance = isBalanceSub(root->right, &rightdep);
    *d += leftdep > rightdep ? leftdep : rightdep;
    if(!leftBalance || !rightBalance)   return false;
    int a = leftdep-rightdep;
    return a <=1 && a>=-1;
}