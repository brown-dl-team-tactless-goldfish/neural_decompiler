int** imageSmoother(int** M, int MRowSize, int MColSize, int** columnSizes, int* returnSize) {
    int** ans = calloc(MRowSize, sizeof(int*));
    *returnSize = MRowSize;
    *columnSizes = calloc(MRowSize, sizeof(int));
    for(int i = 0; i < MRowSize; i++)
    {
        (*columnSizes)[i] = MColSize;
        ans[i] = calloc(MColSize, sizeof(int));
    }
    int i,j,x,y, count;
    for(i = 0; i < MRowSize; i++)
    {
        for(j = 0; j < MColSize; j++)
        {
            count = 0;
            
            for(x = i - 1; x <= i + 1; x++)
            {
                for(y = j - 1; y <= j + 1; y++)
                {
                    if(x >= 0 && x < MRowSize && y >=0 && y < MColSize)
                    {
                        ans[i][j] += M[x][y];
                        count++;
                    }
                }
            }
            ans[i][j] /= count;
        }
    }
    return ans;
}