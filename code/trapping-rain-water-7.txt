int trap(int* height, int heightSize){
    int rain = 0;
    int highest;
    int high, ground, next;
    
    for (int i = 0 ; i < heightSize ; i++){
        high = height[i];
        ground = 0;
        next = i+1;
        while (next < heightSize && high > height[next]){
            ground += height[next];
            next++;
        }
        if (next < heightSize){
            next--;
            if (next > i){
                rain += high*(next-i) - ground;
                i = next;
            }
        } else {
            highest = i;
            break;
        }
    }
    
    for (int i = heightSize-1 ; i > highest ; i--){
        high = height[i];
        ground = 0;
        next = i-1;
        while (high > height[next]){
            ground += height[next];
            next--;
        }
        next++;
        if (i > next){
            rain += high*(i-next) - ground;
            i = next;
        }
    }
    return rain;
}
