class Solution {    
public:
    #define is_illegal() (mp[0]<k || mp[1]<k || mp[2]<k)
    int takeCharacters(string s, int k) {
        if(k==0) return 0;
        int n = s.length(), L = 0, R=-1, max_w = 0; //the sliding window interval is like this [L,R];
        vector<int> mp=vector<int>(3,0);
        for(int i = 0;i<n;i++) mp[s[i]-='a']++;//convert aabaaaacaabc to 001000020012
        if(is_illegal()) return -1;
        while(L<n && R<n) {
            if(is_illegal()) 
                mp[s[L++]]++; 
            else 
                mp[s[++R]]--;
            max_w = max(max_w, R-L+1);
        }
        return n-(max_w-1); //max_w is the maximum window size that can make first illegal. 
    }
};