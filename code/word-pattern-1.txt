var map = new Dictionary<char, string>();
string[] words = s.Split(' ');
if (pattern.Length != words.Length)
	return false;
for (int i = 0; i < words.Length; i++)
{
	char c      = pattern[i];
	string word = words[i];
	if (!map.ContainsKey(c) && map.ContainsValue(word)
		|| map.ContainsKey(c) && map[pattern[i]] != word)
		return false;
	if (!map.ContainsKey(c))
		map.Add(pattern[i], word);
}
return true;