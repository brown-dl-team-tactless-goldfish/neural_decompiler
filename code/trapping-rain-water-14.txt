int trap(int* height, int heightSize) {
    int l = 0, r = heightSize -1, maxL = 0, maxR = 0, total = 0;

    while (l < r) {
        if (height[l] <= height[r]) {
            if (height[l] >= maxL) {
                maxL = height[l];
            } else {
                total += maxL - height[l];
            }
            l++;
        } else {
            if (height[r] >= maxR) {
                maxR = height[r];
            } else {
                total += maxR - height[r];
            }
            r--;
        }        
    }
    return total;
}