struct ListNode * reverse(struct ListNode * root)
{
    if(root == NULL) return NULL;
    struct ListNode * pre = root;
    root = root->next;
    pre->next = NULL;
    while(root)
    {
        struct ListNode * temp = root->next;
        root->next = pre;
        pre = root;
        root = temp;
    }
    return pre;
}

void reorderList(struct ListNode* head){
    if(head == NULL || head->next == NULL || head->next->next == NULL)
        return;
    struct ListNode *slow = head, *fast = head;
    while(fast->next != NULL && fast->next->next != NULL)
    {
        slow = slow->next;
        fast = fast->next->next;
    }
    struct ListNode * mid = slow->next;
    slow->next = NULL;
    mid = reverse(mid);
    while(mid != NULL)
    {
        struct ListNode *t1 = head->next, *t2 = mid->next;
        head->next = mid;
        mid->next = t1;
        head = t1;
        mid = t2;
    }
}