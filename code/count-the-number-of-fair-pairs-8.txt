class Solution {
public:
    using ll = long long;
    long long countFairPairs(vector<int>& A, int l, int h) {
        ll res = 0;
        sort(begin(A), end(A));
        auto countLess = [&](int v) {
            ll res = 0, i = 0, j = A.size()-1;
            while(i < j) {
                if(A[i]+A[j] >= v) j--;
                else res += j-i++;
            }
            return res;
        };
        return countLess(h+1)-countLess(l);
    }
};