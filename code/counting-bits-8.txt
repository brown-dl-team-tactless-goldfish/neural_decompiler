#include <stdlib.h>

inline int num_of_1_bits(int num) {
    
    int count = 0;
    for (int i = 0; i < 17; i++) {
        count += (num & (1 << i)) ? 1 : 0;
    }
    return count;
}


/**
 * Note: The returned array must be malloced, assume caller calls free().
 */
int* countBits(int n, int* returnSize){
    
    *returnSize = n + 1;
    int *ans = malloc(*returnSize * sizeof(int));
    
    for (int i = 0; i <= n; i++) {
        ans[i] = num_of_1_bits(i);
    }
    return ans;
}