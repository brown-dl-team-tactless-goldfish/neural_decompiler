/**
 * Definition for a binary tree node.
 * struct TreeNode {
 *     int val;
 *     struct TreeNode *left;
 *     struct TreeNode *right;
 * };
 */
#define max(a,b) a>b?a:b
#define mod 1000000007
//making the sum tree
int sumtree(struct TreeNode* root){
    if(root==NULL) return 0;
    root->val=sumtree(root->left)+sumtree(root->right)+root->val;
    return root->val;
}
int maxProduct(struct TreeNode* root){
    long long ans=0;
    int totsum=sumtree(root);
    //traversal function
    int trav(struct TreeNode* root){
        if(root==NULL) return 0;
        long long m1=totsum-root->val,m2=root->val;//storing in long as the product might exceed int limit
        ans=max(ans,(m1*m2));
        trav(root->left);
        trav(root->right);
        return 0;//function can also be void
    }
    trav(root);
    return ans%mod;
}