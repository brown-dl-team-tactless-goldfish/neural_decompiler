public class Solution {
    public string RepeatLimitedString(string s, int repeatLimit) {
        int[] cnt = new int[26];
        int n = s.Length;
        for (int i = 0; i < n; ++i) {
            ++cnt[s[i] - 'a'];
        } 
        StringBuilder res = new StringBuilder();
        for (char c = 'z'; c >= 'a'; --c) {
            while (cnt[c - 'a'] > 0) {
                for (int i = 0; i < repeatLimit && cnt[c - 'a'] > 0; ++i) {
                    --cnt[c - 'a'];
                    res.Append(c);
                }
                if (cnt[c - 'a'] == 0) break;
                char take = '0';
                for (char d = 'a'; d <= 'z'; ++d) {
                    if (d != c && cnt[d - 'a'] > 0) {
                        take = d;
                    }
                }
                if (take == '0') break;
                --cnt[take - 'a'];
                res.Append(take);
            }
        }
        return Convert.ToString(res);
    }
}