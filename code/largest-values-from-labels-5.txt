class Solution {
    static bool compare(pair<int, int>p1, pair<int, int>p2) {
        return p1.first > p2.first;
    }
public:
    int largestValsFromLabels(vector<int>& values, vector<int>& labels, int num_wanted, int use_limit) {
        
        vector<pair<int, int>>res;
        for (int i = 0; i < values.size(); i++)
            res.push_back({values[i], labels[i]});
        
        sort(res.begin(), res.end(), compare);
        int ans = 0;
        
        unordered_map<int, int>m;
        for (int i = 0; i < res.size(); i++) {
            m[res[i].second]++;
            if (m[res[i].second] <= use_limit) {
                ans += res[i].first;
                num_wanted--;
                if (num_wanted == 0)
                    break;
            }
        }
        
        return ans;
    }
};