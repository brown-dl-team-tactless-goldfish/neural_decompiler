class Solution {
public:
    int maxUniqueSplit(string s) {
        dfs(s, 0);
        return maxN;
    }
    
    void dfs(const string& s, int i){
        if(i == s.size()){
            maxN = max(maxN, ss.size());
            return;
        }
        for(int len = 1; i+len <= s.size(); len++){
            auto t = s.substr(i, len);
            if(ss.count(t)) continue;
            ss.insert(t);
            dfs(s, i+len);
            ss.erase(t);
        }
    }
    
    unordered_set<string> ss;
    size_t maxN = 0;
};