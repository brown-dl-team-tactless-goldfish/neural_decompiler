public:
    string shiftingLetters(string s, vector<vector<int>>& shifts) {
        vector<int> bucket(s.size() + 1, 0);
        for (auto& it: shifts){
            if (it[2] == 1){
                bucket[it[0]] ++;
                bucket[it[1] + 1] --;
            }else{
                bucket[it[0]] --;
                bucket[it[1] + 1] ++;
            }
        }
        
        int accumulate = 0;
        string ans = "";
        for (int i = 0; i < s.size(); ++ i){
            accumulate += bucket[i];
            
            int temp = (accumulate % 26 + 26) % 26;
            if (temp > 'z' - s[i]){
                ans += 'a' + temp - 'z' + s[i] - 1;
            }else{
                ans += s[i] + temp;
            }
        }
        
        return ans;
    }