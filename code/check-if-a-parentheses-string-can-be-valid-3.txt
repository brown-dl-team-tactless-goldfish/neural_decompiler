class Solution {
public:
  bool canBeValid(string s, string l) {
    if(s.size()%2) return false;
    int op = 0, za = 0, lo = 0;
    
    for(int i = 0; i != s.size(); i++){
      if(l[i] == '0') lo++;
      else s[i] == ')' ? za++ : op++;
      
      if(za > op + lo) return false;
    }
    
    op = 0, za = 0, lo = 0;
    
    for(int i = s.size() - 1; i >= 0; i--){
      if(l[i] == '0') lo++;
      else s[i] == ')' ? za++ : op++;
      
      if(op > za + lo) return false;
    }
    
    return true;
  }
};