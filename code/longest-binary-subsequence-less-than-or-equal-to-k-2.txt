class Solution {
public:
    int longestSubsequence(string s, int k) {
        int ans = 0, i = 0, j = 0, n = s.length(), c = 0;
        long long t = 0;
        while (j < n)
        {
            t = (t << 1) + s[j] - '0';
            while (t > k)
            {
                if (s[i] == '0')
                    c++;
                else
                    t -= ((long long)(s[i] - '0') << (j - i));
                i++;
            }
            ans = max(ans, j - i + 1 + c);
            j++;
        }
        return ans;
    }
};