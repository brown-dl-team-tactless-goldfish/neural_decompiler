int minMoves_v2(vector<int>& nums, int limit) {

	vector<int> vec1(limit * 2 + 2, 0), vec2(limit * 2 + 2, 0);

	int n = nums.size();

	for (int i = 0; 2 * i < n - 1; ++i) {
		vec2[nums[i] + nums[n - i - 1]]++;

		vec1[min(nums[i], nums[n - i - 1]) + 1]++;
		vec1[max(nums[i], nums[n - i - 1]) + limit + 1]--;
	}

	int res = n;
	int curr = 0;

	for (int i = 2; i <= limit * 2; ++i) {

		curr += vec1[i];

		int val = (n / 2  - curr) * 2 + curr - vec2[i];

		res = min(res, val);

	}

	return res;
}