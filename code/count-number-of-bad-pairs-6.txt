class Solution {
public:
    long long countBadPairs(vector<int>& nums) {
        long long n = nums.size();
        
        map<long long,long long> mp;
        for(int i=0;i<n;i++){
            long long t = (i-nums[i]);
            
            mp[t]++;
        }
        
        long long tp = ((n-1)*(n))/2;//total pairs
        
        long long gp = 0 ;
        for(auto &it:mp){
            long long ele = it.first;
            long long freq = it.second;
            
            if(freq == 1){
                continue;
            }
            else{
                freq--;
                gp += ((freq)*(freq+1))/2;
            }
        }
        
        return tp-gp;
        
    }
};


/*

j - i != nums[j] - nums[i].

j-i == nums[j]-nums[i]
j-nums[j] = i-nums[i];

*/