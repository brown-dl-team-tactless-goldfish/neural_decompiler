int dfs(struct TreeNode* root, int *max_sum){
    if(!root) return 0;

    int left = fmax(0, dfs(root->left, max_sum)); // select 0 or left tree sum
    int right = fmax(0, dfs(root->right, max_sum)); // select 0 or right tree sum

    *max_sum = fmax(*max_sum, left + right + root->val); // select both trees sum
    return fmax(left, right) + root->val; // return the left or right sum
}

int maxPathSum(struct TreeNode* root){
    int max_sum = INT_MIN; // minimum sum
    dfs(root, &max_sum);
    return max_sum;
}