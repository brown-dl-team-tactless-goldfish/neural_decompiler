bool compare(char* S, char* buffer)
{
    int len1 = strlen(S);
    int len2 = strlen(buffer);
    int i=0,j=0;
    
    if(len1<len2)
        return false;
    
    while(i<=len1-len2)
    {
        for(j=0;j<len2;j++)
        {
            if(S[i+j]!=buffer[j])
                break;
        }
        if(j==len2)
            return true;
        i++;
    }
    
    return false;
}

bool queryString(char * S, int N){
    int i,j,idx,temp;
    char* buffer = (char*)malloc(33*sizeof(char));
    
    for(i=1;i<=N;i++)
    {
        //convert to bin string from the end
        idx = 0;
        temp = i;
        while(temp)
        {
            buffer[idx++] = (temp&1) + '0';
            temp>>=1;
        }
        buffer[idx] = '\0';
        // reverse
        j=0;
        while(j<idx-1)
        {
            temp = buffer[j];
            buffer[j] = buffer[idx-1];
            buffer[idx-1] = temp;
            j++;
            idx--;
        }
        //compare with S
        if(compare(S,buffer)==false)
            return false;        
    }
    
    return true;
}