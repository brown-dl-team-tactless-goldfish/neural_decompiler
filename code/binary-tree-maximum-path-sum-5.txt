int sum;
#define max(a,b) (a>b?a:b)

int findPath(struct TreeNode* root) {
    if (NULL == root)
        return NULL;
    
    sum = max(sum, root->val);
    int r = findPath(root->right);
    int l = findPath(root->left);
    
    int lr = max(0, max(l, r));
    int mid = r + l + root->val;
    
    sum = max(sum, max(lr + root->val, mid));
    return lr + root->val;
}

int maxPathSum(struct TreeNode* root) {
    sum = INT_MIN;
    findPath(root);
    return sum;
}