class Solution {
public:
    int countSquares(vector<vector<int>>& grid) {
       int r = grid.size();
       int c = grid[0].size();
       int count = 0;
       vector<vector<int>> dp(r,vector<int>(c));
       for(int i = 0;i<r;i++)
       {
       	for(int j = 0;j<c;j++)
       	{
       		if( i == 0 || j == 0)
       		{
       			dp[i][j] = grid[i][j];
       		}
       		else
       		{
       			if(grid[i][j] == 1)
                           dp[i][j] = min(min(dp[i-1][j],dp[i][j-1]),dp[i-1][j-1]) + 1;
       		}
       	  }
       }

       for(int i = 0;i<r;i++)
       {
       	  for(int j = 0;j<c;j++)
       	   {
       		count+=dp[i][j];
           }
       } 
    return count;
   }
};