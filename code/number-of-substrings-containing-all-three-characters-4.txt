int numberOfSubstrings (char * s) {
  int i, j, bgn = -1, len = strlen(s), ret = 0;
  int cnt[3] = {0};

  for (i = j = 0; i < len; i++) {
    cnt[s[i]-'a']++;
    if (cnt[0] && cnt[1] && cnt[2]) {
      while (cnt[s[j]-'a'] > 1) cnt[s[j++]-'a']--;
      ret += (j - bgn) * (len - i);
      bgn = j;
    }
  }

  return ret;
}