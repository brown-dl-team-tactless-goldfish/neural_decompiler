public class Solution {
    public int FindMaxValueOfEquation(int[][] points, int k) {
        LinkedList<int[]> queue = new LinkedList<int[]>();
        int max = Int32.MinValue;
        
        for (int i = 0; i < points.Length; i++){
            while (queue.Count > 0 && queue.First.Value[1] < points[i][0] - k){
                queue.RemoveFirst();
            }
            if (queue.Count > 0){
                max = Math.Max(max, queue.First.Value[0] + points[i][0] + points[i][1]);
            }
            while (queue.Count > 0 && queue.Last.Value[0] <= points[i][1] - points[i][0]){
                queue.RemoveLast();
            }
            queue.AddLast(new int[]{points[i][1] - points[i][0], points[i][0]});
        }
        
        return max;
    }
}