double myPow(double x, int n){
    bool   neg = n < 0;
    double a   = 1.0;
    long   l   = n;
    
    if (neg) l = -l;
    
    while (l > 0) {
        double t = x;
        long   c = 2;
        while (c < l) {
            t = t*t;
            c = c*2;
        }

        a = a*t;
        l = l - c/2;
    }
    
    return neg ? 1.0/a : a;
}