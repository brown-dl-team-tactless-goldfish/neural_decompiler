public class Solution 
{
    public bool ValidSquare(int[] p1, int[] p2, int[] p3, int[] p4) 
    {
        var hashSet = new HashSet<int>()
                    { 
                        DistanceSquare(p1, p2), 
                        DistanceSquare(p1, p3), 
                        DistanceSquare(p1, p4), 
                        DistanceSquare(p2, p3), 
                        DistanceSquare(p2, p4), 
                        DistanceSquare(p3, p4)
                     };
        
	    return !hashSet.Contains(0) && hashSet.Count == 2; 
    }
    
    private int DistanceSquare(int[] a, int[] b)
    {
        return (a[0] - b[0]) * (a[0] - b[0]) + (a[1] - b[1]) * (a[1] - b[1]);
    }
}