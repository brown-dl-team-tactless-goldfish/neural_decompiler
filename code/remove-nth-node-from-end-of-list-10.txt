/**
 * Definition for singly-linked list.
 * struct ListNode {
 *     int val;
 *     struct ListNode *next;
 * };
 */

struct ListNode* removeNthFromEnd(struct ListNode* head, int n){
    
    struct ListNode* prev = NULL;
    struct ListNode* headcopy = head;
    struct ListNode* fastptr = head;
    
    while (n-- >0) fastptr = fastptr->next;
        
    while (fastptr)
    {
        prev = headcopy;
        headcopy = headcopy->next;
        fastptr = fastptr->next;
    }
    
    // Remove first one
    if (!prev) {
        headcopy = head->next;
        free(head);
        return headcopy;
    }

    prev->next = headcopy->next;
    free(headcopy);
    return head;

}