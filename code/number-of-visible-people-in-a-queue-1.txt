int *stack;
int top;

void push(int n)
{
    stack[++top] = n;
}

int pop()
{
    return stack[top--];
}

int peek()
{
    return stack[top];
}

/**
 * Note: The returned array must be malloced, assume caller calls free().
 */
int* canSeePersonsCount(int *h, int len, int *retlen){
    int *retrun = (int *)malloc(len * sizeof(int));
    int vis;
    stack = (int *)malloc(len * sizeof(int));
    top = -1;
    *retlen = len;
    len -= 1;
    for(int i = len; i >= 0; i -= 1)
    {
        vis = 0;
        while(top != -1 && h[peek()] < h[i])
        {
            vis += 1;
            pop();
        }
        if(top == -1)
        {
            retrun[i] = vis;
        } else
        {
            retrun[i] = vis + 1;
        }
        push(i);
    }
    return retrun;
}