public class Solution {
    public double ChampagneTower(int poured, int query_row, int query_glass) {
        
        double[,] dp = new double[query_row + 1, query_row + 2];
        dp[0,0] = (double)poured;
        
        for(int r = 0; r <= query_row - 1; r++)
        {
            for(int c = 0; c <= r; c++)
            {
                if(dp[r,c] > 1)
                {
                    dp[r+1, c] += (dp[r,c] - 1) / 2.0;
                    dp[r+1, c+1] = (dp[r,c] - 1) / 2.0;
                    dp[r,c] = Math.Min(dp[r,c] , 1.0);
                }
            }
        }
        
        return Math.Min(1, dp[query_row,query_glass]);
    }
}