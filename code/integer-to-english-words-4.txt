#include <math.h>
#include <stdlib.h>
#include <string.h>

static const char * ONES[] = 
{ 
    "", "One ", "Two ", "Three ", "Four ", 
    "Five ", "Six ", "Seven ", "Eight ", "Nine "
};

static const char * TEENS[] = 
{
    "Ten ", "Eleven ", "Twelve ", "Thirteen ", "Fourteen ", 
    "Fifteen ", "Sixteen ", "Seventeen ", "Eighteen ", "Nineteen ",
};

static const char * TENS[] =
{
    "", "Ten ", "Twenty ", "Thirty ", "Forty ",
    "Fifty ", "Sixty ", "Seventy ", "Eighty ", "Ninety "
};

static const char * COMMAS[] = { "Billion ", "Million ", "Thousand ", "" };

char * numberToWords(int num)
{
    if (!num)
        return "Zero";
    
    char * result = calloc(sizeof(char), 113);
    int parsed_val = 0;
    
    for (int comma_pos = 0; comma_pos < 4; ++comma_pos)
    {
        parsed_val = (num / (1000000000 / (int) pow(1000, comma_pos))) % 1000;
    
        if (parsed_val)
        {
            if (parsed_val / 100)
            {
                strcat(result, ONES[parsed_val / 100]);
                strcat(result, "Hundred ");
            }

            parsed_val %= 100;

            if (parsed_val >= 20)
            {
                strcat(result, TENS[parsed_val / 10]);
                strcat(result, ONES[parsed_val % 10]);
            }
            else if (parsed_val >= 10)
                strcat(result, TEENS[parsed_val % 10]);
            else
                strcat(result, ONES[parsed_val % 10]);

            strcat(result, COMMAS[comma_pos]);
        }
    }
    
    result[strlen(result) - 1] = '\0';
    return result;
}