int func(int n, int flag){
    if(n==1){
        return 1;
    }
    if(n<5&&flag!=0){
        return 2;
    }
    if(flag==0){
        if(n%2==0){
            return 2*func(n/2,!flag)-1;
        }
    }
    return 2*func(n/2,!flag);
}
int lastRemaining(int n) {
    if(n==1){
        return 1;
    }
    if(n<5){
        return 2;
    }
    return 2*func((n%2==0?n:n-1)/2,0);
}