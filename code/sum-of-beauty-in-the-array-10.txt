class Solution {
public:
    int sumOfBeauties(vector<int>& A) {
        int N = A.size(), res = 0;
        vector<bool> l(N, false), r(N, false);
        for(int i = 0, max_v = 0, min_v = 100001; i < N; i++) {
            l[i] = A[i] > max_v;
            r[N-i-1] = A[N-i-1] < min_v;
            max_v =  max(max_v, A[i]);
            min_v =  min(min_v, A[N-i-1]);
        }
        for(int i = 1; i < N-1; i++) res += l[i] && r[i] ? 2 : A[i] > A[i-1] && A[i] < A[i+1] ? 1 : 0;
        return res;
    }
};