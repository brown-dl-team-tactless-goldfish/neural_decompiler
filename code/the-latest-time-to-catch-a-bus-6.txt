class Solution
{
public:
    int latestTimeCatchTheBus(vector<int> &buses, vector<int> &passengers, int capacity)
    {

        sort(buses.begin(), buses.end());
        sort(passengers.begin(), passengers.end());

   

        int i = 0;
        int j = 0;

        int time = 1;

        while (i < buses.size())
        {
            int c = capacity;

            bool left = false;

            int size = min(j + capacity,(int) passengers.size());

            for (; j < size; j++)
            {
                if (passengers[j] > buses[i])
                {
                    
                    break;
                }


                c--;

                if (j == 0 || passengers[j] - passengers[j - 1] != 1)
                {
                       
                    time = passengers[j] - 1;
                }
            }
            
           
            if (c>0 && (j==0 || buses[i]!= passengers[j-1])){
                
                time = buses[i];
            }

            i++;
        }

        return time;
    }
};