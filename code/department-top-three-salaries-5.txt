;with cte as(
select *, ROW_NUMBER() over (partition by departmentId order by salary desc) as 'num' from Employee )

select d.name as 'Department', c.name as 'Employee', c.salary from cte c join Department d on c.departmentId = d.id where c.num<4