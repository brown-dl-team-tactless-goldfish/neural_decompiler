
select c.contest_id, (round(total_enrollement/total_count *100,2)) as percentage
from 
(select count(1) as total_count from users) u inner join 
(select contest_id , count(r.user_id) as total_enrollement
from 
users u inner join register r 
on u.user_id=r.user_id 
group by contest_id ) as c 
order by 2 desc , 1 asc