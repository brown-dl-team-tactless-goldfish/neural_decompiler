class Solution {
public:
    int longestPalindrome(vector<string>& words) {
        unordered_map<string, int>mp;
        for(int i = 0 ; i < words.size(); i++) mp[words[i]]++;
        int c = 0;
        bool flag = true;
        for(auto w: words){
            string s = w;
            reverse(s.begin(), s.end());
            if(s!=w && mp[s] > 0 && mp[w] > 0) {
                mp[w]--; mp[s]--;
                c += 4;
            }
            else if(s == w && mp[s] > 1){
                mp[s] -= 2;
                c += 4;
            }
            else if(s == w && flag && mp[s] > 0) {
                flag = !flag;
                mp[s]--;
                c += 2;
            }
        }
        return c;
    }
};
// please upvote if you like