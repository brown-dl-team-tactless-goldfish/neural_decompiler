int cmp(int* a, int* b) {
  int a_val = *a;
  int b_val = *b;

  int a_bit = 0;
  int b_bit = 0;

  while (a_val) {
    if (a_val & 1) a_bit++;
    a_val >>= 1;
  }

  while (b_val) {
    if (b_val & 1) b_bit++;
    b_val >>= 1;
  }

  if (a_bit != b_bit) return a_bit - b_bit;
  return *a - *b;
}

int* sortByBits(int* arr, int arrSize, int* returnSize) {
  *returnSize = arrSize;
  qsort(arr, arrSize, sizeof(int), cmp);
  return arr;
}