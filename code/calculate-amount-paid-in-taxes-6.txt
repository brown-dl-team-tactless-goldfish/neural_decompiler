class Solution {
public:
   
    double calculateTax(vector<vector<int>>& brackets, int income) {
        int n = brackets.size();
        double tax = 0;
        double dollarsTaxed = 0;
        bool incomeReached = false;
        
        for(int i=0;i<n;i++) {    
            
            if(incomeReached) 
                return tax;
            
            double upper = brackets[i][0];
            double rate = brackets[i][1]/100.00;
            double X = 0.0;
            
            if(i==0) { 
                X = upper;
            }
            else {
                X = upper - brackets[i-1][0]; // amount to be taxes
            }
            
            dollarsTaxed+=X; // dollarsTaxed increase
           
            if(dollarsTaxed>income) {
                incomeReached = true; // we have already taxed income
                dollarsTaxed -= X; // remove excess dollars taxed
                X = income - dollarsTaxed; // amount of money to be taxed
            }
            
            tax += (X*rate);
        }
        return tax;
    }
};