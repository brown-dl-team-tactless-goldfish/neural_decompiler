public class Solution
{
    public int[] ArrayRankTransform(int[] arr) 
    {
        int[] result = new int[arr.Length], arrCopy = new HashSet<int>(arr).ToArray();
        Array.Sort(arrCopy);
        var rank = new Dictionary<int, int>();
        for(int i = 0; i < arrCopy.Length; i++)
            rank[arrCopy[i]] = i + 1;
        for(int i = 0; i < arr.Length; i++)
            result[i] = rank[arr[i]];
        return result;
    } 
}