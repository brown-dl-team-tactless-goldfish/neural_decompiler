class Solution {
public:
	int findMinMoves(vector<int>& machines) {
		int sum=0;
		int n=machines.size();
		for(auto& x:machines){
			sum+=x;
		}
		if(sum%n!=0){
			return -1;
		}
		int k=sum/n;
		vector<int> left(n,0);
		vector<int> right(n,0);
		right[0]=machines[0]-k;
		left[n-1]=machines[n-1]-k;
		for(int i=1;i<n-1;i++){
			left[i]=-right[i-1];
			right[i]=machines[i]-k-left[i];
		}
		int res=0;
		for(int i=0;i<n;i++){
			int tem=0;
			if(left[i]>0){
				tem+=left[i];
			}
			if(right[i]>0){
				tem+=right[i];
			}
			res=max(res,tem);
		}
		return res;
	}
};