public class Solution {
    public IList<int> PathInZigZagTree(int label) {
        var row = 0;

        while (label >= 1 << row + 1) row++;

        var res = new List<int> { label };

        while (row > 0)
        {
            var next = ((1 << row) + (1 << (row - 1)) - 1) - label / 2;

            res.Insert(0, next);

            label = next;

            row--;
        }

        return res;
    }
}