public class Solution {
    public int LongestSubarray(int[] nums) {

        int best = 0;
        int total = 0;
        int best_length = 0;
        int c = 0;

        foreach(int a in nums){

            int b = a & total;
            if(a > b){
                c = 1;
                total = a;
            } else {
                c++;
                total = b;
            }

            if(total > best){
                best = total;
                best_length = c;
            } else if (total == best) {
                best_length = Math.Max(best_length, c);
            }
        }
        
        return best_length;
    }
}