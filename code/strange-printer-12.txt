class Solution {
public:
    int strangePrinter(string s) {
        string ss; 
        for (int i = 0; i < s.size(); ++i) 
            if (i == 0 || s[i-1] != s[i]) ss.push_back(s[i]); 
        
        int n = ss.size(); 
        vector<vector<int>> dp(n+1, vector<int>(n+1)); 
        
        for (int lo = n-1; lo >= 0; --lo) 
            for (int hi = lo+1; hi <= n; ++hi) {
                dp[lo][hi] = 1 + dp[lo+1][hi]; 
                for (int mid = lo+1; mid < hi; ++mid) 
                    if (ss[lo] == ss[mid]) 
                        dp[lo][hi] = min(dp[lo][hi], dp[lo][mid] + dp[mid+1][hi]); 
            }
        return dp[0][n]; 
    }
};