char * removeDuplicates(char * S){

	if (*S == 0) return(S);

	int dstOff = 0; // behind
	int srcOff = 0; // forward

	while (S[srcOff]) {
		if ( S[srcOff] == S[srcOff+1]) {
			srcOff += 2;
		}
		else if ( (dstOff > 0) && (dstOff != srcOff) && (S[dstOff-1] == S[srcOff]) ) {
			srcOff++;
			dstOff--;
		}
		else {
			if (dstOff != srcOff) S[dstOff] = S[srcOff];
			dstOff++;
			srcOff++;
		}

	}
	S[dstOff] = 0;

	return(S);
}