int maxValueAfterReverse(vector<int>& nums) {
	int ret=0;
	int n = nums.size();
	if(n <= 1) return 0;
	for(int i = 0; i < n-1;i++) {
		ret += abs(nums[i]-nums[i+1]);
	}

	int minEnd = max(nums[0], nums[1]);
	int maxStart = min(nums[0], nums[1]);
	for(int i = 1; i < n; i++) {
		minEnd = min(minEnd, max(nums[i], nums[i-1]));
		maxStart = max(maxStart, min(nums[i], nums[i-1]));
	}
	int add = 2*max(0, maxStart - minEnd);

	for(int i = 1; i < n; i++) {
		int c = abs(nums[0] - nums[i]) - abs(nums[i] - nums[i-1]);
		add = max(add, c);
		c = abs(nums[n-1] - nums[i-1]) - abs(nums[i] - nums[i-1]);
		add = max(add, c);
	}
	return ret + add;
}