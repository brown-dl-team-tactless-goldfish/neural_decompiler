class Solution {
public:
    int maximumRows(vector<vector<int>>& mat, int cols) {
        int m = mat.size();
        int n = mat[0].size();
        int N = 1 << n;
        
        int mx = 0;
        
        for(int i = 1; i <= N; i++) {
            if(__builtin_popcount(i) == cols) {
                set<int> st;
                for(int j = 0; j < n; j++) {
                    if(i & (1<<j)) st.insert(j);
                }
                int cnt = 0;
                for(int r = 0; r < m; r++) {
                    bool flag = true;
                    for(int c = 0; c < n; c++) {
                        if(mat[r][c] == 1 && !st.count(c)) {
                            flag = false;
                            break;
                        }
                    }
                    if(flag) cnt += 1;
                }
                mx = max(mx, cnt);
            }
        }
        
        return mx;
    }
};
