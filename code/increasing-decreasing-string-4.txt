#define LOW 'a'
#define HIGH 'z'
#define SIZE 123
#define START_DIRECTION 1

char *sortString(char *s)
{
    int len = 0, map[SIZE] = { 0 };
    char *out = s, *p = out, i = LOW, d = START_DIRECTION;

    /* Build a histogram of characters */
    while(*s)
    {
        map[*s++]++;
        len++;
    }

    /* Ping-pong through the histogram */
    while(len)
    {
        while(i >= LOW && i <= HIGH && !map[i]) i += d;
        
        if(i < LOW || i > HIGH) 
        {
            d = -d;
        }
        else
        {
            map[*p++ = i]--;
            len--;
        }
        
        i += d;
    }

    return out;
}