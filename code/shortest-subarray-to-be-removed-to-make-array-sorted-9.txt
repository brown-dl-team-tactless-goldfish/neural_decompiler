class Solution {
public:
    int findLengthOfShortestSubarray(vector<int>& arr) {
		int n = arr.size(), r = n - 1;
		while (r - 1 >= 0 && arr[r - 1] <= arr[r]) r--;
		int ans = n - r;
		int prev = -1;
		for (int i = 0; i < n; i++) {
			if (arr[i] < prev) break;
			while (r < n && (arr[r] < arr[i] || r <= i)) r++;
			if (r < n) {
				ans = max(ans, i + 1 + n - r);
			} else ans = max(ans, i + 1);
			prev = arr[i];
		}
		return n - ans;
    }
};
