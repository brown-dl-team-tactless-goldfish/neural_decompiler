/**
 * Definition for a binary tree node.
 * struct TreeNode {
 *     int val;
 *     struct TreeNode *left;
 *     struct TreeNode *right;
 * };
 */

void traceTree(struct TreeNode *n, int max, int *p) {
    if (!n)
        return;
    if (n->val >= max) {
        *p += 1;
        traceTree(n->left, n->val, p);
        traceTree(n->right, n->val, p);
    } else {
        traceTree(n->left, max, p);
        traceTree(n->right, max, p);
    }
}

int goodNodes(struct TreeNode *root){
    int result = 0;
    traceTree(root, root->val, &result);
    return result;
}