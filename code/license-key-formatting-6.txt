len = keyLength(s);
rem = len % k;

if (rem == 0) 
    rem = k;

len += (len + k - 1) / k - 1;

if (len < 0) 
    len = 0;

key = malloc(sizeof(char) * (len + 1));

i = j = 0;

for (c = k + 1 - rem; i < len;) {
    if (c == k + 1) {
        key[i++] = '-';
        c = 1;
    } else {
        if (s[j] != '-') {
            key[i++] = (97 <= s[j] && s[j] <= 122) ? s[j] - 32 : s[j];
            c++;
        }
        j++;
    }
}

key[len] = '\0';

return key;