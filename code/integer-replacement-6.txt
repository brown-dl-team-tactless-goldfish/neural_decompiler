int integerReplacement(int n)
{
    // Avoid overflow
    long nn = n;
    int count = 0;

    // Edge case
    if (nn == 1)
        return 0;
    while (1)
    {
        // Edge case
        if (nn == 3)
        {
            count += 2;
            break;
        }
        // Odd
        if (nn & 1)
            if (nn & 2)
                nn++;
            else
               nn--;
        // Even
        else
            nn >>= 1;
        count++;
        if (nn == 1)
            break;
    }
    return count;
}