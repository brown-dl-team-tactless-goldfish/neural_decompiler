class Solution {
public:
    bool canReorderDoubled(vector<int>& A) {
        
        int n = A.size();
        
        map<int, int>hm;
        for (int i = 0; i < A.size(); i++)
            hm[A[i]]++;
        
        int res = 0;
        for (auto it = hm.begin(); it != hm.end(); it++) {
            int first = it->first;
            int second = it->second;
            
            if (first == 0) {
                res += second/2;
                hm[first] = 0;
            } else if (hm.find(2*first) != hm.end()) {
                int val = min(second, hm[2*first]);
                res += val;
                hm[first] -= val;
                hm[2*first] -= val;
            }
        }
        
        return (res == n/2);
    }
};