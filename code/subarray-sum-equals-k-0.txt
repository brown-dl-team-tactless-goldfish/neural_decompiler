int subarraySum(int* nums, int numsSize, int k){
    int i, j; 
    int base = numsSize * 1000;
    //if map size too big, then free(hashMap) will TLE
    int* hashMap = calloc((2 * base + 1) , sizeof(int));
    int prefix = 0;
    hashMap[base]++;
    int ans = 0;
    for(i = 1; i <= numsSize; i++ ){
        prefix = prefix + nums[i-1];
        int remain = prefix - k;
        ans += hashMap[remain + base];
        hashMap[base + prefix]++;
    }
    
    free(hashMap);
    return ans;

}