public class Solution
{
    public int MaxNumberOfFamilies(int n, int[][] reservedSeats)
    {
        var dic = new Dictionary<int, int>();
        foreach (var seat in reservedSeats)
        {
            if (!dic.ContainsKey(seat[0]))
                dic.Add(seat[0], 0);
            dic[seat[0]] |= 1 << (seat[1] - 1);
        }

        int res = 0;
        foreach (int mask in dic.Values)
        {
            if ((mask & 0b111111110) == 0)
                res += 2;
            else if ((mask & 0b1111000) == 0 || (mask & 0b111100000) == 0 || (mask & 0b11110) == 0)
                res += 1;
        }

        return res + (n - dic.Count) * 2;
    }
}