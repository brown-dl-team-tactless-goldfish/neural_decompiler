class Solution {
    public int numSubarrayBoundedMax(int[] A, int L, int R) {
        int wndS = 0, wndE = -1, idx, cnt = 0;
        
        for (idx = 0; idx < A.length; idx++) {
            if (A[idx] <= R) {
                if (A[idx] >= L) {
                    wndE = idx;
                }
                cnt += wndE-wndS+1;
            } else {
                wndE = idx;
                wndS = idx+1;
            }
        }
        return cnt;
    }
}