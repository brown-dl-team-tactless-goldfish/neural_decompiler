class RangeFreqQuery {
public:
    RangeFreqQuery(vector<int>& arr) {
        for (int i = 0; i < arr.size(); i++) 
            map[arr[i]].push_back(i); 
    }
    
    int query(int left, int right, int value) {
        vector<int>& loc = map[value]; 
        auto l_itr = lower_bound(loc.begin(), loc.end(), left); 
        int l = l_itr - loc.begin(); 
        auto r_itr = upper_bound(loc.begin(), loc.end(), right); 
        int r = r_itr - loc.begin()-1; 
        return r - l+1; 
    }
    
    unordered_map<int, vector<int>> map; 
};