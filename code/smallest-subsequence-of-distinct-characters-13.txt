class Solution {
public:
    string smallestSubsequence(string s) {
        vector<int> nums(26,0);
        for(char c : s)
            nums[c-'a']++;
        
        string ret = "";
        unordered_map<char,bool> ump;
        
        for(int i=0; i<s.size(); i++) {
            if(ump[s[i]] == false) {
                while(ret.size() && s[i] < ret.back() && nums[ret.back()-'a'] > 0) {
                    ump[ret.back()] = false;
                    ret.pop_back();
                }
                ret.push_back(s[i]);
                ump[s[i]] = true;
            }
            nums[s[i]-'a']--;
        }

        return ret;
    }
};