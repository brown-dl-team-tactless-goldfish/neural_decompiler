class Solution 
{
public:
    long long coutPairs(vector<int>& nums, int k) 
    {
        unordered_map<int, int> um;
        long long ans = 0;
        int count = 0;
        for(auto& num : nums)
        {
            int g = gcd(num, k);
            int m = k / g;//the missing part to gain k
            long long c = 0;
            if(m == 1)//k == g
            {
                ans += count;
            }
            else
            {
                for(auto it : um)
                {
                    if(it.first % m == 0)
                    {
                        c += it.second;
                    }
                }
                ans += c;
            }
            um[g]++;
            count++;
        }
        return ans;
    }
};