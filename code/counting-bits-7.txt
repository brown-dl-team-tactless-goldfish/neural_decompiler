int* countBits(int num, int* returnSize) {
    *returnSize = num + 1;
    int *results = malloc(*returnSize * sizeof(int));
    results[0] = 0;

    int cur_power = 0;
    int nxt_power = 1;
        
    for(int i = 1; i <= num; i++) {
        if(i == nxt_power) {
            results[i] = 1;
            cur_power = nxt_power;
            nxt_power *= 2;
        }
        else {
            results[i] = 1 + results[i - cur_power];
        }
    }
    return results;
}