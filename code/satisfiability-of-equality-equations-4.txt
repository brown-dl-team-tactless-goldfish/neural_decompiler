class Solution:
    def equationsPossible(self, equations: List[str]) -> bool:
        parents = {}

        def find(node):
            return node if node not in parents else find(parents[node])

        for left, op, _, right in equations:
            if op == '=':
                left, right = find(left), find(right)
                if left != right:
                    parents[left] = right
      
        return all([find(left) != find(right) for left, op, _, right in equations if op == '!'])
