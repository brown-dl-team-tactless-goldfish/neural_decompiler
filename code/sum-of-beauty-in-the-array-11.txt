class Solution {
public:
    int sumOfBeauties(vector<int>& nums) {
        ios_base::sync_with_stdio(false); cin.tie(NULL); cout.tie(NULL);
        int n=nums.size();
        int ans=0;
        vector <int> greater(n);
        vector <int> smaller(n);
        smaller[n-1]=nums[n-1];
        greater[0]=nums[0];
        for (int i=1;i<n;i++){
            greater[i]=max(greater[i-1],nums[i]);
            int j=n-i-1;
            smaller[j]=min(smaller[j+1],nums[j]);
            
        }
        for (int i=1;i<n-1;i++){
            if (greater[i-1]<nums[i] && nums[i]<smaller[i+1]) ans+=2;
            else if (nums[i-1]<nums[i] && nums[i]<nums[i+1]) ans+=1;
        }
        return ans;
    }
};