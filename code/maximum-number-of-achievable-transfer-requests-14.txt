public class Solution {
    int max = 0;
    
    public int MaximumRequests(int n, int[][] requests) {
        int[] counts = new int[n];
        GetMaxRequests(requests, 0, 0, counts);
        return max;
    }
    
    private void GetMaxRequests(int[][] requests, int index, int num, int[] counts)
    {
        if (index == requests.Length)
        {
            for (int i = 0; i < counts.Length; i++)
            {
                if (counts[i] != 0)
                {
                    return;
                }
            }
            max = Math.Max(max, num);
            return;
        }
        
        counts[requests[index][0]]--;
        counts[requests[index][1]]++;
        GetMaxRequests(requests, index + 1, num + 1, counts);
        counts[requests[index][0]]++;
        counts[requests[index][1]]--;
        GetMaxRequests(requests, index + 1, num, counts);
    }
}