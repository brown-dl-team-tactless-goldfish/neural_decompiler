class Solution {
public:
    bool strongPasswordCheckerII(string password) {
        int n = password.size();
        if(n < 8) return false;
        string x = "!@#$%^&*()-+";
        bool ok1 = false, ok2 = false, ok3 = false, ok4 = false;
        for(int i = 0; i < n; i++) {
            char c = password[i];
            if(i != 0 && c == password[i-1]) return false;
            if(isdigit(c)) ok4 = true;
            if((int)c >= 65 && (int)c <= 90) ok2 = true;
            if((int)c >= 97 && (int)c <= 122) ok1 = true;
            if(x.find(c) != string::npos) ok3 = true;
        } 
        if(ok1&&ok2&&ok3&&ok4) return true;
        return false;
    }
};