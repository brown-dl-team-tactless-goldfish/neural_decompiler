class Solution {
public:
    int countSpecialSubsequences(vector<int>& nums) 
    {
        const int mod=1e9+7;
        long long x,y,z;
        x=y=z=0;
        for(auto it:nums)
        {
            if(it==0)
            {
                x=(1+2*x)%mod;
            }
            else if(it==1)
            {
                y=(2*y+x)%mod;
            }
            else
            {
                z=(2*z+y)%mod;
            }
        }
        return z%mod;
      
    }
};