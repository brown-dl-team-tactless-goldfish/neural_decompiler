class Solution {
private:
    int __lcm(int a,int b){
        return (a*b)/__gcd(a,b);
    }
public:
    int subarrayLCM(vector<int>& nums, int k) {
        int ct=0;
        const int N = 1e6;
        for(int i=0; i<nums.size(); ++i){
            int lcm = nums[i];
            if(lcm == k) ct++;
            for(int j=i+1; j<nums.size(); ++j){
                lcm = __lcm(lcm,nums[j]);
                if(lcm == k) ct++;
                if(lcm > N) break;
            }
        }
        return ct;
    }
};