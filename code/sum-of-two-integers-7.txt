while (carry != 0)
{
    t1 = sum;
    t2 = carry;
    sum = t1 ^ t2;
    carry = (t1 & t2) << 1L;
}
return sum;