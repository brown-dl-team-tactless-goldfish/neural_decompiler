class Solution {
public:
    int dp[102][102][22] = {};
    
    int solve(vector<vector<int>>& cost, vector<int>& houses, int target, int i, int prev){
        if(i < 0 || target < 0) return target == 0?0:1e9;   //base case
        if(dp[i][target][prev]) return dp[i][target][prev];
        
        int res = 1e9;
        int t = target;
        if(houses[i] != 0){  //if already colored, then do nothing
            t = (houses[i] != prev)? target -1: target;  
            res = solve(cost, houses, t, i-1, houses[i]);
        }else{     //if not colored, then color it with all possible way
            for(int c = 1; c <= cost[i].size(); ++c){
                t = (c != prev)? target -1: target;
                res = min( res, cost[i][c-1] + solve(cost, houses, t,  i-1, c));
            }
        }
        return dp[i][target][prev] = res;
    }
    
    int minCost(vector<int>& houses, vector<vector<int>>& cost, int m, int n, int target) {
        auto ans = solve(cost, houses, target, m-1, 0); 
        return ans >= 1e9?-1:ans;
    }
};