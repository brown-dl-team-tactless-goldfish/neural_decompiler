class Solution {
public:
    int findMaxValueOfEquation(vector<vector<int>>& points, int k) {
        map<int, int> valMap;
        int n = points.size(), i = 0;
        int ans = -1e9;
        valMap[points[i][1] - points[i][0]]++;
        for (int j = 1; j < n; j++) {
            while (points[j][0] - points[i][0] > k && i <= j) {
                int c = points[i][1] - points[i][0];
                valMap[c]--;
                if (valMap[c] == 0) valMap.erase(c);
                i++;
            }
            if (!valMap.empty()) {
                int maxn = valMap.rbegin()->first;
                ans = max(ans, maxn + points[j][0] + points[j][1]);
            }
            valMap[points[j][1] - points[j][0]]++;
        }
        return ans;
    }
};