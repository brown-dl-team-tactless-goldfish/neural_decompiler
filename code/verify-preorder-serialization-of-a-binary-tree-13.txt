public class Solution {
    public bool IsValidSerialization(string preorder) {
        
        int degree = 1; // degree = outdegree - indegree
        
        string[] nodes = preorder.Split(",");
        foreach(string node in nodes)
        {
			// when a new node added to the tree, we consume an outdegree
            degree--;
			
			// no place to add the node to the tree
            if(degree < 0)
                return false;
            
			// if node is not null, it creates two outdegrees
            if(node != "#")
                degree += 2;
        }
        
        return degree == 0;
    }
}