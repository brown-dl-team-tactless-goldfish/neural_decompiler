int get_MinMax(int a,int b,int c,bool flag){
    //1=Max 0=Min
    if(flag){
      return a > b? (a > c? a: c): (b > c? b: c);      
    } 
    return a < b? (a < c? a: c): (b < c? b: c);        
}


int maxProduct(int* nums, int ns){
    int cur_max=nums[0];
    int cur_min=nums[0];
    int prev_max=nums[0];
    int prev_min=nums[0];
    int ret_max=nums[0];
    for(int i=1;i<ns;i++){
        cur_max=get_MinMax(prev_max*nums[i],prev_min*nums[i],nums[i],1);
        cur_min=get_MinMax(prev_max*nums[i],prev_min*nums[i],nums[i],0);
        
        ret_max=get_MinMax(ret_max,cur_max,INT_MIN,1);
        
        prev_max=cur_max;
        prev_min=cur_min;
    }     
    return ret_max;
}