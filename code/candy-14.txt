forward[0] = 1;
for (i = 1; i < ratingsSize; i ++)
    forward[i] = ratings[i] > ratings[i - 1]? forward[i - 1] + 1: 1;

backward[ratingsSize - 1] = 1;
for (i = ratingsSize - 2; i >= 0; i --)
    backward[i] = ratings[i] > ratings[i + 1]? backward[i + 1] + 1: 1;

for (i = 0; i < ratingsSize; i ++)
    sum += (forward[i] > backward[i] ? forward[i]: backward[i]);

return sum;