public int MaxTurbulenceSize(int[] arr) => arr
    .Zip(arr.Skip(1), Comparer<int>.Default.Compare)
    .Aggregate((Up: 1, Down: 1, Max: 1), (a, c) =>
        c < 0 ? (1, a.Up + 1, Math.Max(a.Max, a.Up + 1)) :
        c > 0 ? (a.Down + 1, 1, Math.Max(a.Max, a.Down + 1)) :
        (1, 1, a.Max)
    ).Max;